(()=>{"use strict";var e={810:(e,t,a)=>{function n(e,t,a){let n=document.getElementById("data-bar"),i=document.createElement("p");i.classList.add("dailyDateHolder"),i.innerHTML=e;let o=document.createElement("img");o.classList.add("dailyConditionIcon"),o.setAttribute("src",t),o.setAttribute("alt","Weather Condition Icon");let r=document.createElement("h1");r.classList.add("dailyTemperatureHolder"),r.innerHTML=a+" °C";let c=document.createElement("div");c.classList.add("dailyContainer"),c.appendChild(o),c.appendChild(i),c.appendChild(r),n.appendChild(c)}a.d(t,{j1:()=>n}),function(){let e=document.getElementById("upper-bar"),t=document.createElement("button");t.classList.add("dailyButton"),t.innerHTML="Daily";let a=document.createElement("button");a.classList.add("hourlyButton"),a.innerHTML="Hourly",0==e.childNodes.length?(e.appendChild(t),e.appendChild(a)):(e.replaceChild(t,e.children[0]),e.replaceChild(a,e.children[1]))}()},743:(e,t,a)=>{function n(e,t,a,n,i,o){const r=document.getElementById("basic-data");let c=document.createElement("h2");c.classList.add("cityCountryNameName"),c.innerHTML=e+", "+t;let d=document.createElement("p");d.classList.add("timeDate"),d.innerHTML=a;let s=document.createElement("div");s.classList.add("conditionContainer");let l=document.createElement("img");l.setAttribute("src",n),l.setAttribute("alt","Weather Condition Icon");let h=document.createElement("h2");h.classList.add("whetherCondition"),h.innerHTML=i,s.appendChild(h),s.appendChild(l);let u=document.createElement("h1");u.classList.add("currentTemperature"),u.innerHTML=o+" °C",0==r.childNodes.length?(r.appendChild(c),r.appendChild(d),r.appendChild(s),r.appendChild(u)):(r.replaceChild(c,r.children[0]),r.replaceChild(d,r.children[1]),r.replaceChild(s,r.children[2]),r.replaceChild(u,r.children[3]))}function i(e,t,a,n,i){const o=document.getElementById("additional-data");let r=document.createElement("p");r.classList.add("humidityData"),r.innerHTML="Humidity "+e+" %";let c=document.createElement("p");c.classList.add("feelslikeData"),c.innerHTML="Feels Like "+t+" °C";let d=document.createElement("p");d.classList.add("windspeedData"),d.innerHTML="Wind Speed "+a+" kph",0==n[0]&&((n=n.split("")).shift(),n=n.join(""));let s=document.createElement("p");s.classList.add("sunriseData"),s.innerHTML="Sunrise "+n,0==i[0]&&((i=i.split("")).shift(),i=i.join(""));let l=document.createElement("p");l.classList.add("sunsetData"),l.innerHTML="Sunset "+i,0==o.childNodes.length?(o.appendChild(r),o.appendChild(c),o.appendChild(d),o.appendChild(s),o.appendChild(l)):(o.replaceChild(r,o.children[0]),o.replaceChild(c,o.children[1]),o.replaceChild(d,o.children[2]),o.replaceChild(s,o.children[3]),o.replaceChild(l,o.children[4]))}a.d(t,{X:()=>n,d:()=>i})},304:(e,t,a)=>{a.d(t,{s:()=>n});const n="f06d23d621c748f1aed94259232004"},530:(e,t,a)=>{function n(e,t){let a=0,n=0,i=[];for(let o=0;o<Object.keys(e.day0.hour).length;o++){let r=e.day0.hour[`hour${o}`].time;if(new Date(r).getTime()>new Date(t).getTime()&&e.day0.hour[`hour${o}`].chance_of_rain>0){if(n+=1,n>1){i[1]=e.day0.hour[`hour${o}`].chance_of_rain;let t=i[0]/100,a=t+i[1]/100*(1-t);i[0]=100*a}else i.push(e.day0.hour[`hour${o}`].chance_of_rain);a+=e.day0.hour[`hour${o}`].chance_of_rain}}return 0==n?0:1==n?a:Math.round(100*i[0])/100}function i(e,t){let a=0,n=0,i=[];for(let o=0;o<Object.keys(e.day0.hour).length;o++){let r=e.day0.hour[`hour${o}`].time;if(new Date(r).getTime()>new Date(t).getTime()&&e.day0.hour[`hour${o}`].chance_of_snow>0){if(n+=1,n>1){i[1]=e.day0.hour[`hour${o}`].chance_of_snow;let t=i[0]/100,a=t+i[1]/100*(1-t);i[0]=100*a}else i.push(e.day0.hour[`hour${o}`].chance_of_snow);a+=e.day0.hour[`hour${o}`].chance_of_snow}}return 0==n?0:1==n?a:Math.round(100*i[0])/100}a.d(t,{K:()=>n,Z:()=>i})}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=a(304),t=a(743),n=a(530),i=a(810);class o{constructor(e,t,a,n,i,o,r,c,d,s,l){this.country=e,this.city=t,this.local_time=a,this.condition=n,this.condition_icon=i,this.humidity=o,this.sunrise=r,this.sunset=c,this.celsiusData=d,this.fahrenheitData=s,this.hourlyForecastData=l}basicDataDOM(){(0,t.X)(this.city,this.country,this.local_time,this.condition_icon,this.condition,this.celsiusData.temperature)}additionalDataDOM(){(0,t.d)(this.humidity,this.celsiusData.feelslike,this.celsiusData.wind,this.sunrise,this.sunset)}rainChance(){(0,n.K)(this.hourlyForecastData,this.local_time)}snowChance(){(0,n.Z)(this.hourlyForecastData,this.local_time)}}class r{constructor(e){this.dailyForecast=e}generateDailyData(){const e=document.getElementById("data-bar");for(;e.firstChild;)e.removeChild(e.firstChild);for(let e=0;e<Object.keys(this.dailyForecast).length;e++){let t=this.dailyForecast["day"+e].date,a=this.dailyForecast["day"+e].condition_icon,n=this.dailyForecast["day"+e].avg_tempC;(0,i.j1)(t,a,n)}}generateDailyDataButton(){document.getElementsByClassName("dailyButton")[0].addEventListener("click",(()=>{this.generateDailyData()}))}}class c{constructor(e){this.hourlyForecast=e}generateHourlyDataButton(){const e=document.getElementById("data-bar");document.getElementsByClassName("hourlyButton")[0].addEventListener("click",(()=>{for(;e.firstChild;)e.removeChild(e.firstChild)}))}}document.getElementById("searchButton").addEventListener("click",(t=>{t.preventDefault(),async function(t){try{const a=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${e.s}&q=${t}&days=3`,{mode:"cors"}),n=await a.json();console.log(n);const i={basic_data:{country:n.location.country,city:n.location.name,local_time:n.location.localtime,condition:n.current.condition.text,condition_icon:"https:"+n.current.condition.icon,humidity:n.current.humidity,sunrise:n.forecast.forecastday[0].astro.sunrise,sunset:n.forecast.forecastday[0].astro.sunset},celsius:{feelslike:n.current.feelslike_c,temperature:n.current.temp_c,wind:n.current.wind_kph},fahrenheit:{feelslike:n.current.feelslike_f,temperature:n.current.temp_f,wind:n.current.wind_mph},forecast:{forecast_per_day:{},forecast_per_hour:{}}};function o(){for(let e=0;e<3;e++)i.forecast.forecast_per_day["day"+e]={date:n.forecast.forecastday[e].date,condition_icon:"https:"+n.forecast.forecastday[e].day.condition.icon,avg_tempC:n.forecast.forecastday[e].day.avgtemp_c,avg_tempF:n.forecast.forecastday[e].day.avgtemp_f}}function r(){for(let e=0;e<3;e++){i.forecast.forecast_per_hour["day"+e]={date:n.forecast.forecastday[e].date},i.forecast.forecast_per_hour["day"+e].hour={};for(let t=0;t<24;t++)i.forecast.forecast_per_hour["day"+e].hour["hour"+t]={condition_icon:"https:"+n.forecast.forecastday[e].hour[t].condition.icon,temperatureC:n.forecast.forecastday[e].hour[t].temp_c,temperatureF:n.forecast.forecastday[e].hour[t].temp_f,humidity:n.forecast.forecastday[e].hour[t].humidity,chance_of_rain:n.forecast.forecastday[e].hour[t].chance_of_rain,chance_of_snow:n.forecast.forecastday[e].hour[t].chance_of_snow,time:n.forecast.forecastday[e].hour[t].time}}}return o(),r(),i}catch(c){console.log(c)}}(document.getElementById("location").value).then((e=>{const{country:t,city:a,local_time:n,condition:i,condition_icon:d,humidity:s,sunrise:l,sunset:h}=e.basic_data,u=e.celsius,m=e.fahrenheit,y=e.forecast.forecast_per_day,f=e.forecast.forecast_per_hour,p=new o(t,a,n,i,d,s,l,h,u,m,f),_=new r(y),C=new c(f);_.generateDailyData(),_.generateDailyDataButton(),C.generateHourlyDataButton(),p.basicDataDOM(),p.additionalDataDOM()}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUdJLEtBQUsrRixHQUFHVixPQUN2RDlHLFNBQVV5RixFQUFTWSxTQUFTQyxZQUFZakYsR0FBR0ksS0FBSytGLEdBQUd4SCxTQUNuRDZCLGVBQ0U0RCxFQUFTWSxTQUFTQyxZQUFZakYsR0FBR0ksS0FBSytGLEdBQUczRixlQUMzQ1EsZUFDRW9ELEVBQVNZLFNBQVNDLFlBQVlqRixHQUFHSSxLQUFLK0YsR0FBR25GLGVBQzNDakQsS0FBTXFHLEVBQVNZLFNBQVNDLFlBQVlqRixHQUFHSSxLQUFLK0YsR0FBR3BJLEtBR3JELENBQ0YsQ0FJQSxPQUZBOEgsSUFDQUssSUFDTzFCLENBQ1QsQ0FBRSxNQUFPOEIsR0FDUGhDLFFBQVFDLElBQUkrQixFQUNkLENBQ0YsQ0FFRUMsQ0F2RmtCL0osU0FBU0MsZUFBZSxZQUFZK0osT0F1Ri9CQyxNQUFNQyxJQUMzQixNQUFNLFFBQ0o1SSxFQUFPLEtBQ1BELEVBQUksV0FDSitCLEVBQVUsVUFDVjNCLEVBQVMsZUFDVDVCLEVBQWMsU0FDZHNDLEVBQVEsUUFDUkcsRUFBTyxPQUNQQyxHQUNFMkgsRUFBS2pDLFdBQ0hrQyxFQUFxQkQsRUFBS3ZCLFFBQzFCeUIsRUFBd0JGLEVBQUtuQixXQUM3QnNCLEVBQW9CSCxFQUFLMUIsU0FBU1csaUJBQ2xDaEcsRUFBcUIrRyxFQUFLMUIsU0FBU1ksa0JBQ25Da0IsRUFBZ0IsSUFBSXpFLEVBQ3hCdkUsRUFDQUQsRUFDQStCLEVBQ0EzQixFQUNBNUIsRUFDQXNDLEVBQ0FHLEVBQ0FDLEVBQ0E0SCxFQUNBQyxFQUNBakgsR0FFSW9ILEVBQXNCLElBQUloRSxFQUFjOEQsR0FDeENHLEVBQXVCLElBQUlyRCxFQUFlaEUsR0FDaERvSCxFQUFvQi9ELG9CQUNwQitELEVBQW9CdkQsMEJBQ3BCd0QsRUFBcUJwRCwyQkFFckJrRCxFQUFjcEUsZUFDZG9FLEVBQWNuRSxtQkFBbUIsR0F6SFgsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2ZvcmVjYXN0RE9NLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL21haW5ET00uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvbXlLZXkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvd2VhdGhlckNoYW5jZS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBidXR0b25zKCkge1xuICBsZXQgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cHBlci1iYXJcIik7XG5cbiAgbGV0IGRhaWx5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgZGFpbHlCdXR0b24uY2xhc3NMaXN0LmFkZChcImRhaWx5QnV0dG9uXCIpO1xuICBkYWlseUJ1dHRvbi5pbm5lckhUTUwgPSBcIkRhaWx5XCI7XG5cbiAgbGV0IGhvdXJseUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGhvdXJseUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiaG91cmx5QnV0dG9uXCIpO1xuICBob3VybHlCdXR0b24uaW5uZXJIVE1MID0gXCJIb3VybHlcIjtcblxuICBpZiAoYnV0dG9uQ29udGFpbmVyLmNoaWxkTm9kZXMubGVuZ3RoID09IDApIHtcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoZGFpbHlCdXR0b24pO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChob3VybHlCdXR0b24pO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkNvbnRhaW5lci5yZXBsYWNlQ2hpbGQoZGFpbHlCdXR0b24sIGJ1dHRvbkNvbnRhaW5lci5jaGlsZHJlblswXSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnJlcGxhY2VDaGlsZChob3VybHlCdXR0b24sIGJ1dHRvbkNvbnRhaW5lci5jaGlsZHJlblsxXSk7XG4gIH1cbn1cbmJ1dHRvbnMoKTtcbmZ1bmN0aW9uIGRhaWx5KGRhdGUsIGNvbmRpdGlvbl9pY29uLCB0ZW1wKSB7XG4gIGxldCBkYWlseURhdGFDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGEtYmFyXCIpO1xuXG4gIGxldCBkYWlseURhdGVIb2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgZGFpbHlEYXRlSG9sZGVyLmNsYXNzTGlzdC5hZGQoXCJkYWlseURhdGVIb2xkZXJcIik7XG4gIGRhaWx5RGF0ZUhvbGRlci5pbm5lckhUTUwgPSBkYXRlO1xuXG4gIGxldCBkYWlseUNvbmRpdGlvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBkYWlseUNvbmRpdGlvbkljb24uY2xhc3NMaXN0LmFkZChcImRhaWx5Q29uZGl0aW9uSWNvblwiKTtcbiAgZGFpbHlDb25kaXRpb25JY29uLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjb25kaXRpb25faWNvbik7XG4gIGRhaWx5Q29uZGl0aW9uSWNvbi5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJXZWF0aGVyIENvbmRpdGlvbiBJY29uXCIpO1xuXG4gIGxldCBkYWlseVRlbXBlcmF0dXJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICBkYWlseVRlbXBlcmF0dXJlSG9sZGVyLmNsYXNzTGlzdC5hZGQoXCJkYWlseVRlbXBlcmF0dXJlSG9sZGVyXCIpO1xuICBkYWlseVRlbXBlcmF0dXJlSG9sZGVyLmlubmVySFRNTCA9IHRlbXAgKyBcIiDCsENcIjtcblxuICBsZXQgQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJkYWlseUNvbnRhaW5lclwiKTtcbiAgQ29udGFpbmVyLmFwcGVuZENoaWxkKGRhaWx5Q29uZGl0aW9uSWNvbik7XG4gIENvbnRhaW5lci5hcHBlbmRDaGlsZChkYWlseURhdGVIb2xkZXIpO1xuICBDb250YWluZXIuYXBwZW5kQ2hpbGQoZGFpbHlUZW1wZXJhdHVyZUhvbGRlcik7XG5cbiAgZGFpbHlEYXRhQ29udGFpbmVyLmFwcGVuZENoaWxkKENvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIGhvdXJseSgpIHt9XG5cbmZ1bmN0aW9uIGRhaWx5QnV0dG9uKCkge31cblxuZnVuY3Rpb24gaG91cmx5QnV0dG9uKCkge31cblxuZXhwb3J0IHsgZGFpbHlCdXR0b24sIGhvdXJseUJ1dHRvbiwgZGFpbHksIGhvdXJseSB9O1xuIiwiZnVuY3Rpb24gYmFzaWNEYXRhKGNpdHksIGNvdW50cnksIHRpbWUsIGNvbmRpdGlvbkljb24sIGNvbmRpdGlvbiwgdGVtcGVyYXR1cmUpIHtcbiAgY29uc3QgZGF0YUhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFzaWMtZGF0YVwiKTtcblxuICBsZXQgY2l0eUNvdW50cnlOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICBjaXR5Q291bnRyeU5hbWUuY2xhc3NMaXN0LmFkZChcImNpdHlDb3VudHJ5TmFtZU5hbWVcIik7XG4gIGNpdHlDb3VudHJ5TmFtZS5pbm5lckhUTUwgPSBjaXR5ICsgXCIsIFwiICsgY291bnRyeTtcblxuICBsZXQgdGltZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgdGltZURhdGUuY2xhc3NMaXN0LmFkZChcInRpbWVEYXRlXCIpO1xuICB0aW1lRGF0ZS5pbm5lckhUTUwgPSB0aW1lO1xuXG4gIGxldCBjb25kaXRpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25kaXRpb25Db250YWluZXIuY2xhc3NMaXN0LmFkZChcImNvbmRpdGlvbkNvbnRhaW5lclwiKTtcblxuICBsZXQgY29uZGl0aW9uSWNvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGNvbmRpdGlvbkljb25Db250YWluZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIGNvbmRpdGlvbkljb24pO1xuICBjb25kaXRpb25JY29uQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcImFsdFwiLCBcIldlYXRoZXIgQ29uZGl0aW9uIEljb25cIik7XG5cbiAgbGV0IHdlYXRoZXJDb25kaXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gIHdlYXRoZXJDb25kaXRpb24uY2xhc3NMaXN0LmFkZChcIndoZXRoZXJDb25kaXRpb25cIik7XG4gIHdlYXRoZXJDb25kaXRpb24uaW5uZXJIVE1MID0gY29uZGl0aW9uO1xuICBjb25kaXRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQod2VhdGhlckNvbmRpdGlvbik7XG4gIGNvbmRpdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjb25kaXRpb25JY29uQ29udGFpbmVyKTtcblxuICBsZXQgY3VycmVudFRlbXBlcmF0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuICBjdXJyZW50VGVtcGVyYXR1cmUuY2xhc3NMaXN0LmFkZChcImN1cnJlbnRUZW1wZXJhdHVyZVwiKTtcbiAgY3VycmVudFRlbXBlcmF0dXJlLmlubmVySFRNTCA9IHRlbXBlcmF0dXJlICsgXCIgwrBDXCI7XG5cbiAgaWYgKGRhdGFIb2xkZXIuY2hpbGROb2Rlcy5sZW5ndGggPT0gMCkge1xuICAgIGRhdGFIb2xkZXIuYXBwZW5kQ2hpbGQoY2l0eUNvdW50cnlOYW1lKTtcbiAgICBkYXRhSG9sZGVyLmFwcGVuZENoaWxkKHRpbWVEYXRlKTtcbiAgICBkYXRhSG9sZGVyLmFwcGVuZENoaWxkKGNvbmRpdGlvbkNvbnRhaW5lcik7XG4gICAgZGF0YUhvbGRlci5hcHBlbmRDaGlsZChjdXJyZW50VGVtcGVyYXR1cmUpO1xuICB9IGVsc2Uge1xuICAgIGRhdGFIb2xkZXIucmVwbGFjZUNoaWxkKGNpdHlDb3VudHJ5TmFtZSwgZGF0YUhvbGRlci5jaGlsZHJlblswXSk7XG4gICAgZGF0YUhvbGRlci5yZXBsYWNlQ2hpbGQodGltZURhdGUsIGRhdGFIb2xkZXIuY2hpbGRyZW5bMV0pO1xuICAgIGRhdGFIb2xkZXIucmVwbGFjZUNoaWxkKGNvbmRpdGlvbkNvbnRhaW5lciwgZGF0YUhvbGRlci5jaGlsZHJlblsyXSk7XG4gICAgZGF0YUhvbGRlci5yZXBsYWNlQ2hpbGQoY3VycmVudFRlbXBlcmF0dXJlLCBkYXRhSG9sZGVyLmNoaWxkcmVuWzNdKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRpdGlvbmFsRGF0YShodW1pZGl0eSwgZmVlbHNsaWtlLCB3aW5kc3BlZWQsIHN1bnJpc2UsIHN1bnNldCkge1xuICBjb25zdCBhZGRpdGlvbmFsRGF0YUhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkaXRpb25hbC1kYXRhXCIpO1xuXG4gIGxldCBodW1pZGl0eURhdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgaHVtaWRpdHlEYXRhLmNsYXNzTGlzdC5hZGQoXCJodW1pZGl0eURhdGFcIik7XG4gIGh1bWlkaXR5RGF0YS5pbm5lckhUTUwgPSBcIkh1bWlkaXR5IFwiICsgaHVtaWRpdHkgKyBcIiAlXCI7XG5cbiAgbGV0IGZlZWxzbGlrZURhdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgZmVlbHNsaWtlRGF0YS5jbGFzc0xpc3QuYWRkKFwiZmVlbHNsaWtlRGF0YVwiKTtcbiAgZmVlbHNsaWtlRGF0YS5pbm5lckhUTUwgPSBcIkZlZWxzIExpa2UgXCIgKyBmZWVsc2xpa2UgKyBcIiDCsENcIjtcblxuICBsZXQgd2luZHNwZWVkRGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICB3aW5kc3BlZWREYXRhLmNsYXNzTGlzdC5hZGQoXCJ3aW5kc3BlZWREYXRhXCIpO1xuICB3aW5kc3BlZWREYXRhLmlubmVySFRNTCA9IFwiV2luZCBTcGVlZCBcIiArIHdpbmRzcGVlZCArIFwiIGtwaFwiO1xuXG4gIGlmIChzdW5yaXNlWzBdID09IDApIHtcbiAgICBzdW5yaXNlID0gc3VucmlzZS5zcGxpdChcIlwiKTtcbiAgICBzdW5yaXNlLnNoaWZ0KCk7XG4gICAgc3VucmlzZSA9IHN1bnJpc2Uuam9pbihcIlwiKTtcbiAgfVxuICBsZXQgc3VucmlzZURhdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgc3VucmlzZURhdGEuY2xhc3NMaXN0LmFkZChcInN1bnJpc2VEYXRhXCIpO1xuICBzdW5yaXNlRGF0YS5pbm5lckhUTUwgPSBcIlN1bnJpc2UgXCIgKyBzdW5yaXNlO1xuXG4gIGlmIChzdW5zZXRbMF0gPT0gMCkge1xuICAgIHN1bnNldCA9IHN1bnNldC5zcGxpdChcIlwiKTtcbiAgICBzdW5zZXQuc2hpZnQoKTtcbiAgICBzdW5zZXQgPSBzdW5zZXQuam9pbihcIlwiKTtcbiAgfVxuICBsZXQgc3Vuc2V0RGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBzdW5zZXREYXRhLmNsYXNzTGlzdC5hZGQoXCJzdW5zZXREYXRhXCIpO1xuICBzdW5zZXREYXRhLmlubmVySFRNTCA9IFwiU3Vuc2V0IFwiICsgc3Vuc2V0O1xuXG4gIGlmIChhZGRpdGlvbmFsRGF0YUhvbGRlci5jaGlsZE5vZGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIuYXBwZW5kQ2hpbGQoaHVtaWRpdHlEYXRhKTtcbiAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5hcHBlbmRDaGlsZChmZWVsc2xpa2VEYXRhKTtcbiAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5hcHBlbmRDaGlsZCh3aW5kc3BlZWREYXRhKTtcbiAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5hcHBlbmRDaGlsZChzdW5yaXNlRGF0YSk7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIuYXBwZW5kQ2hpbGQoc3Vuc2V0RGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIucmVwbGFjZUNoaWxkKFxuICAgICAgaHVtaWRpdHlEYXRhLFxuICAgICAgYWRkaXRpb25hbERhdGFIb2xkZXIuY2hpbGRyZW5bMF1cbiAgICApO1xuICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLnJlcGxhY2VDaGlsZChcbiAgICAgIGZlZWxzbGlrZURhdGEsXG4gICAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5jaGlsZHJlblsxXVxuICAgICk7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIucmVwbGFjZUNoaWxkKFxuICAgICAgd2luZHNwZWVkRGF0YSxcbiAgICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLmNoaWxkcmVuWzJdXG4gICAgKTtcbiAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5yZXBsYWNlQ2hpbGQoXG4gICAgICBzdW5yaXNlRGF0YSxcbiAgICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLmNoaWxkcmVuWzNdXG4gICAgKTtcbiAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5yZXBsYWNlQ2hpbGQoXG4gICAgICBzdW5zZXREYXRhLFxuICAgICAgYWRkaXRpb25hbERhdGFIb2xkZXIuY2hpbGRyZW5bNF1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCB7IGJhc2ljRGF0YSwgYWRkaXRpb25hbERhdGEgfTtcbiIsImV4cG9ydCBjb25zdCBLZXkgPSBcImYwNmQyM2Q2MjFjNzQ4ZjFhZWQ5NDI1OTIzMjAwNFwiO1xuIiwiLy9SZXR1cm5pbmcgY2hhbmNlIG9mIHJhaW4gZm9yIHRoZSByZXN0IG9mIHRoZSBkYXkgbG9jYWwgZGF0ZSB0byBtaWRuaWdodFxuZnVuY3Rpb24gY2hhbmNlT2ZSYWluKGhvdXJseUZvcmVjYXN0RGF0YSwgbG9jYWxfdGltZSkge1xuICBsZXQgY2hhbmNlT2ZSYWluY291bnRlciA9IDA7XG4gIGxldCBjb3VudGVyID0gMDtcbiAgbGV0IGNoYW5jZUFycmF5ID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXMoaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cikubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgdGltZVNsaWNlciA9IGhvdXJseUZvcmVjYXN0RGF0YS5kYXkwLmhvdXJbYGhvdXIke2l9YF0udGltZTtcbiAgICBpZiAobmV3IERhdGUodGltZVNsaWNlcikuZ2V0VGltZSgpID4gbmV3IERhdGUobG9jYWxfdGltZSkuZ2V0VGltZSgpKSB7XG4gICAgICBpZiAoaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cltgaG91ciR7aX1gXS5jaGFuY2Vfb2ZfcmFpbiA+IDApIHtcbiAgICAgICAgY291bnRlciArPSAxO1xuICAgICAgICBpZiAoY291bnRlciA+IDEpIHtcbiAgICAgICAgICBjaGFuY2VBcnJheVsxXSA9XG4gICAgICAgICAgICBob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9yYWluO1xuICAgICAgICAgIGxldCBpbml0aWFsQ2hhbmNlID0gY2hhbmNlQXJyYXlbMF0gLyAxMDA7XG4gICAgICAgICAgbGV0IGluY3JlYXNlID1cbiAgICAgICAgICAgIGluaXRpYWxDaGFuY2UgKyAoY2hhbmNlQXJyYXlbMV0gLyAxMDApICogKDEgLSBpbml0aWFsQ2hhbmNlKTtcbiAgICAgICAgICBjaGFuY2VBcnJheVswXSA9IGluY3JlYXNlICogMTAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5jZUFycmF5LnB1c2goXG4gICAgICAgICAgICBob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9yYWluXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjaGFuY2VPZlJhaW5jb3VudGVyICs9XG4gICAgICAgICAgaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cltgaG91ciR7aX1gXS5jaGFuY2Vfb2ZfcmFpbjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGNvdW50ZXIgPT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKGNvdW50ZXIgPT0gMSkge1xuICAgIHJldHVybiBjaGFuY2VPZlJhaW5jb3VudGVyO1xuICB9XG5cbiAgcmV0dXJuIE1hdGgucm91bmQoY2hhbmNlQXJyYXlbMF0gKiAxMDApIC8gMTAwO1xufVxuXG4vL1JldHVybmluZyBjaGFuY2Ugb2Ygc25vdyBmb3IgdGhlIHJlc3Qgb2YgdGhlIGRheSBsb2NhbCBkYXRlIHRvIG1pZG5pZ2h0XG5mdW5jdGlvbiBjaGFuY2VPZlNub3coaG91cmx5Rm9yZWNhc3REYXRhLCBsb2NhbF90aW1lKSB7XG4gIGxldCBjaGFuY2VPZlNub3djb3VudGVyID0gMDtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBsZXQgY2hhbmNlQXJyYXkgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyhob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyKS5sZW5ndGg7IGkrKykge1xuICAgIGxldCB0aW1lU2xpY2VyID0gaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cltgaG91ciR7aX1gXS50aW1lO1xuICAgIGlmIChuZXcgRGF0ZSh0aW1lU2xpY2VyKS5nZXRUaW1lKCkgPiBuZXcgRGF0ZShsb2NhbF90aW1lKS5nZXRUaW1lKCkpIHtcbiAgICAgIGlmIChob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9zbm93ID4gMCkge1xuICAgICAgICBjb3VudGVyICs9IDE7XG4gICAgICAgIGlmIChjb3VudGVyID4gMSkge1xuICAgICAgICAgIGNoYW5jZUFycmF5WzFdID1cbiAgICAgICAgICAgIGhvdXJseUZvcmVjYXN0RGF0YS5kYXkwLmhvdXJbYGhvdXIke2l9YF0uY2hhbmNlX29mX3Nub3c7XG4gICAgICAgICAgbGV0IGluaXRpYWxDaGFuY2UgPSBjaGFuY2VBcnJheVswXSAvIDEwMDtcbiAgICAgICAgICBsZXQgaW5jcmVhc2UgPVxuICAgICAgICAgICAgaW5pdGlhbENoYW5jZSArIChjaGFuY2VBcnJheVsxXSAvIDEwMCkgKiAoMSAtIGluaXRpYWxDaGFuY2UpO1xuICAgICAgICAgIGNoYW5jZUFycmF5WzBdID0gaW5jcmVhc2UgKiAxMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hhbmNlQXJyYXkucHVzaChcbiAgICAgICAgICAgIGhvdXJseUZvcmVjYXN0RGF0YS5kYXkwLmhvdXJbYGhvdXIke2l9YF0uY2hhbmNlX29mX3Nub3dcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5jZU9mU25vd2NvdW50ZXIgKz1cbiAgICAgICAgICBob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9zbm93O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoY291bnRlciA9PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSBpZiAoY291bnRlciA9PSAxKSB7XG4gICAgcmV0dXJuIGNoYW5jZU9mU25vd2NvdW50ZXI7XG4gIH1cblxuICByZXR1cm4gTWF0aC5yb3VuZChjaGFuY2VBcnJheVswXSAqIDEwMCkgLyAxMDA7XG59XG5cbmV4cG9ydCB7IGNoYW5jZU9mUmFpbiwgY2hhbmNlT2ZTbm93IH07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgeyBLZXkgfSBmcm9tIFwiLi9teUtleVwiO1xuaW1wb3J0IHsgYmFzaWNEYXRhLCBhZGRpdGlvbmFsRGF0YSB9IGZyb20gXCIuL21haW5ET01cIjtcbmltcG9ydCB7IGNoYW5jZU9mUmFpbiwgY2hhbmNlT2ZTbm93IH0gZnJvbSBcIi4vd2VhdGhlckNoYW5jZVwiO1xuaW1wb3J0IHsgZGFpbHlCdXR0b24sIGhvdXJseUJ1dHRvbiwgZGFpbHksIGhvdXJseSB9IGZyb20gXCIuL2ZvcmVjYXN0RE9NXCI7XG5cbmNsYXNzIFdlYXRoZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBjb3VudHJ5LFxuICAgIGNpdHksXG4gICAgbG9jYWxfdGltZSxcbiAgICBjb25kaXRpb24sXG4gICAgY29uZGl0aW9uX2ljb24sXG4gICAgaHVtaWRpdHksXG4gICAgc3VucmlzZSxcbiAgICBzdW5zZXQsXG4gICAgY2Vsc2l1c0RhdGEsXG4gICAgZmFocmVuaGVpdERhdGEsXG4gICAgaG91cmx5Rm9yZWNhc3REYXRhXG4gICkge1xuICAgIHRoaXMuY291bnRyeSA9IGNvdW50cnk7XG4gICAgdGhpcy5jaXR5ID0gY2l0eTtcbiAgICB0aGlzLmxvY2FsX3RpbWUgPSBsb2NhbF90aW1lO1xuICAgIHRoaXMuY29uZGl0aW9uID0gY29uZGl0aW9uO1xuICAgIHRoaXMuY29uZGl0aW9uX2ljb24gPSBjb25kaXRpb25faWNvbjtcbiAgICB0aGlzLmh1bWlkaXR5ID0gaHVtaWRpdHk7XG4gICAgdGhpcy5zdW5yaXNlID0gc3VucmlzZTtcbiAgICB0aGlzLnN1bnNldCA9IHN1bnNldDtcbiAgICB0aGlzLmNlbHNpdXNEYXRhID0gY2Vsc2l1c0RhdGE7XG4gICAgdGhpcy5mYWhyZW5oZWl0RGF0YSA9IGZhaHJlbmhlaXREYXRhO1xuICAgIHRoaXMuaG91cmx5Rm9yZWNhc3REYXRhID0gaG91cmx5Rm9yZWNhc3REYXRhO1xuICB9XG4gIGJhc2ljRGF0YURPTSgpIHtcbiAgICBiYXNpY0RhdGEoXG4gICAgICB0aGlzLmNpdHksXG4gICAgICB0aGlzLmNvdW50cnksXG4gICAgICB0aGlzLmxvY2FsX3RpbWUsXG4gICAgICB0aGlzLmNvbmRpdGlvbl9pY29uLFxuICAgICAgdGhpcy5jb25kaXRpb24sXG4gICAgICB0aGlzLmNlbHNpdXNEYXRhLnRlbXBlcmF0dXJlXG4gICAgKTtcbiAgfVxuXG4gIGFkZGl0aW9uYWxEYXRhRE9NKCkge1xuICAgIGFkZGl0aW9uYWxEYXRhKFxuICAgICAgdGhpcy5odW1pZGl0eSxcbiAgICAgIHRoaXMuY2Vsc2l1c0RhdGEuZmVlbHNsaWtlLFxuICAgICAgdGhpcy5jZWxzaXVzRGF0YS53aW5kLFxuICAgICAgdGhpcy5zdW5yaXNlLFxuICAgICAgdGhpcy5zdW5zZXRcbiAgICApO1xuICB9XG4gIHJhaW5DaGFuY2UoKSB7XG4gICAgY2hhbmNlT2ZSYWluKHRoaXMuaG91cmx5Rm9yZWNhc3REYXRhLCB0aGlzLmxvY2FsX3RpbWUpO1xuICB9XG4gIHNub3dDaGFuY2UoKSB7XG4gICAgY2hhbmNlT2ZTbm93KHRoaXMuaG91cmx5Rm9yZWNhc3REYXRhLCB0aGlzLmxvY2FsX3RpbWUpO1xuICB9XG59XG5cbmNsYXNzIGRhaWx5Rm9yZWNhc3Qge1xuICBjb25zdHJ1Y3RvcihkYWlseUZvcmVjYXN0KSB7XG4gICAgdGhpcy5kYWlseUZvcmVjYXN0ID0gZGFpbHlGb3JlY2FzdDtcbiAgfVxuICBnZW5lcmF0ZURhaWx5RGF0YSgpIHtcbiAgICBjb25zdCBkYXRhQ29udGFpbmVyUmVtb3ZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0YS1iYXJcIik7XG4gICAgd2hpbGUgKGRhdGFDb250YWluZXJSZW1vdmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGRhdGFDb250YWluZXJSZW1vdmVyLnJlbW92ZUNoaWxkKGRhdGFDb250YWluZXJSZW1vdmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHRoaXMuZGFpbHlGb3JlY2FzdCkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBkYXRlTm93ID0gdGhpcy5kYWlseUZvcmVjYXN0W1wiZGF5XCIgKyBpXS5kYXRlO1xuICAgICAgbGV0IGNvbmRpdGlvbkljb25Ob3cgPSB0aGlzLmRhaWx5Rm9yZWNhc3RbXCJkYXlcIiArIGldLmNvbmRpdGlvbl9pY29uO1xuICAgICAgbGV0IHRlbXBlcmF0dXJlTm93ID0gdGhpcy5kYWlseUZvcmVjYXN0W1wiZGF5XCIgKyBpXS5hdmdfdGVtcEM7XG4gICAgICBkYWlseShkYXRlTm93LCBjb25kaXRpb25JY29uTm93LCB0ZW1wZXJhdHVyZU5vdyk7XG4gICAgfVxuICB9XG4gIGdlbmVyYXRlRGFpbHlEYXRhQnV0dG9uKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkYWlseUJ1dHRvblwiKVswXTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuZ2VuZXJhdGVEYWlseURhdGEoKTtcbiAgICB9KTtcbiAgfVxufVxuY2xhc3MgaG91cmx5Rm9yZWNhc3Qge1xuICBjb25zdHJ1Y3Rvcihob3VybHlGb3JlY2FzdCkge1xuICAgIHRoaXMuaG91cmx5Rm9yZWNhc3QgPSBob3VybHlGb3JlY2FzdDtcbiAgfVxuICBnZW5lcmF0ZUhvdXJseURhdGFCdXR0b24oKSB7XG4gICAgY29uc3QgZGF0YUNvbnRhaW5lclJlbW92ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGEtYmFyXCIpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJob3VybHlCdXR0b25cIilbMF07XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB3aGlsZSAoZGF0YUNvbnRhaW5lclJlbW92ZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBkYXRhQ29udGFpbmVyUmVtb3Zlci5yZW1vdmVDaGlsZChkYXRhQ29udGFpbmVyUmVtb3Zlci5maXJzdENoaWxkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vL2J1dHRvbiB0YWtpbmcgbG9jYXRpb24gZnJvbSBpbnB1dCB0aGF0IGZpcmUgYXBpIHJlcXVlc3QgYW5kIGxvZyBkYXRhXG5mdW5jdGlvbiB0YWtlTG9jYXRpb24oKSB7XG4gIGNvbnN0IHNlYXJjaEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoQnV0dG9uXCIpO1xuICBzZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IHRlc3RpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25cIikudmFsdWU7XG4gICAgZmlyZVJlcXVlc3QodGVzdGlucHV0KTtcbiAgfSk7XG59XG50YWtlTG9jYXRpb24oKTtcblxuYXN5bmMgZnVuY3Rpb24gYXBpUmVxdWVzdCh3aGF0TG9jYXRpb24pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkud2VhdGhlcmFwaS5jb20vdjEvZm9yZWNhc3QuanNvbj9rZXk9JHtLZXl9JnE9JHt3aGF0TG9jYXRpb259JmRheXM9M2AsXG4gICAgICB7XG4gICAgICAgIG1vZGU6IFwiY29yc1wiLFxuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgY29uc3QgRGF0YU9iamVjdCA9IHtcbiAgICAgIGJhc2ljX2RhdGE6IHtcbiAgICAgICAgY291bnRyeTogcmVzcG9uc2UubG9jYXRpb24uY291bnRyeSxcbiAgICAgICAgY2l0eTogcmVzcG9uc2UubG9jYXRpb24ubmFtZSxcbiAgICAgICAgbG9jYWxfdGltZTogcmVzcG9uc2UubG9jYXRpb24ubG9jYWx0aW1lLFxuICAgICAgICBjb25kaXRpb246IHJlc3BvbnNlLmN1cnJlbnQuY29uZGl0aW9uLnRleHQsXG4gICAgICAgIGNvbmRpdGlvbl9pY29uOiBcImh0dHBzOlwiICsgcmVzcG9uc2UuY3VycmVudC5jb25kaXRpb24uaWNvbixcbiAgICAgICAgaHVtaWRpdHk6IHJlc3BvbnNlLmN1cnJlbnQuaHVtaWRpdHksXG4gICAgICAgIHN1bnJpc2U6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmFzdHJvLnN1bnJpc2UsXG4gICAgICAgIHN1bnNldDogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbMF0uYXN0cm8uc3Vuc2V0LFxuICAgICAgfSxcbiAgICAgIGNlbHNpdXM6IHtcbiAgICAgICAgZmVlbHNsaWtlOiByZXNwb25zZS5jdXJyZW50LmZlZWxzbGlrZV9jLFxuICAgICAgICB0ZW1wZXJhdHVyZTogcmVzcG9uc2UuY3VycmVudC50ZW1wX2MsXG4gICAgICAgIHdpbmQ6IHJlc3BvbnNlLmN1cnJlbnQud2luZF9rcGgsXG4gICAgICB9LFxuICAgICAgZmFocmVuaGVpdDoge1xuICAgICAgICBmZWVsc2xpa2U6IHJlc3BvbnNlLmN1cnJlbnQuZmVlbHNsaWtlX2YsXG4gICAgICAgIHRlbXBlcmF0dXJlOiByZXNwb25zZS5jdXJyZW50LnRlbXBfZixcbiAgICAgICAgd2luZDogcmVzcG9uc2UuY3VycmVudC53aW5kX21waCxcbiAgICAgIH0sXG4gICAgICBmb3JlY2FzdDoge1xuICAgICAgICAvL0xvb3BpbmcgcGVyIGRheXMgYW5kIGhvdXJzIGluIGZ1bmN0aW9uIGZvcmVjYXN0UGVySG91ckNlbHNpdXMgYW5kIGZvcmVjYXN0X3Blcl9ob3VyX0ZhaHJlbmhlaXRcbiAgICAgICAgZm9yZWNhc3RfcGVyX2RheToge30sXG4gICAgICAgIGZvcmVjYXN0X3Blcl9ob3VyOiB7fSxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBmdW5jdGlvbiBmb3JlY2FzdFBlckRheSgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIERhdGFPYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RfcGVyX2RheVtcImRheVwiICsgaV0gPSB7XG4gICAgICAgICAgZGF0ZTogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF0ZSxcbiAgICAgICAgICBjb25kaXRpb25faWNvbjpcbiAgICAgICAgICAgIFwiaHR0cHM6XCIgKyByZXNwb25zZS5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXkuY29uZGl0aW9uLmljb24sXG4gICAgICAgICAgYXZnX3RlbXBDOiByZXNwb25zZS5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXkuYXZndGVtcF9jLFxuICAgICAgICAgIGF2Z190ZW1wRjogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5LmF2Z3RlbXBfZixcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb3JlY2FzdFBlckhvdXIoKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBEYXRhT2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0X3Blcl9ob3VyW1wiZGF5XCIgKyBpXSA9IHtcbiAgICAgICAgICBkYXRlOiByZXNwb25zZS5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5kYXRlLFxuICAgICAgICB9O1xuICAgICAgICBEYXRhT2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0X3Blcl9ob3VyW1wiZGF5XCIgKyBpXS5ob3VyID0ge307XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgMjQ7IGsrKykge1xuICAgICAgICAgIERhdGFPYmplY3QuZm9yZWNhc3QuZm9yZWNhc3RfcGVyX2hvdXJbXCJkYXlcIiArIGldLmhvdXJbXCJob3VyXCIgKyBrXSA9IHtcbiAgICAgICAgICAgIGNvbmRpdGlvbl9pY29uOlxuICAgICAgICAgICAgICBcImh0dHBzOlwiICtcbiAgICAgICAgICAgICAgcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uaG91cltrXS5jb25kaXRpb24uaWNvbixcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlQzogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uaG91cltrXS50ZW1wX2MsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZUY6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmhvdXJba10udGVtcF9mLFxuICAgICAgICAgICAgaHVtaWRpdHk6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmhvdXJba10uaHVtaWRpdHksXG4gICAgICAgICAgICBjaGFuY2Vfb2ZfcmFpbjpcbiAgICAgICAgICAgICAgcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uaG91cltrXS5jaGFuY2Vfb2ZfcmFpbixcbiAgICAgICAgICAgIGNoYW5jZV9vZl9zbm93OlxuICAgICAgICAgICAgICByZXNwb25zZS5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5ob3VyW2tdLmNoYW5jZV9vZl9zbm93LFxuICAgICAgICAgICAgdGltZTogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uaG91cltrXS50aW1lLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3JlY2FzdFBlckRheSgpO1xuICAgIGZvcmVjYXN0UGVySG91cigpO1xuICAgIHJldHVybiBEYXRhT2JqZWN0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgfVxufVxuZnVuY3Rpb24gZmlyZVJlcXVlc3QoaW5wdXR2YWx1ZSkge1xuICBhcGlSZXF1ZXN0KGlucHV0dmFsdWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBjb3VudHJ5LFxuICAgICAgY2l0eSxcbiAgICAgIGxvY2FsX3RpbWUsXG4gICAgICBjb25kaXRpb24sXG4gICAgICBjb25kaXRpb25faWNvbixcbiAgICAgIGh1bWlkaXR5LFxuICAgICAgc3VucmlzZSxcbiAgICAgIHN1bnNldCxcbiAgICB9ID0gZGF0YS5iYXNpY19kYXRhO1xuICAgIGNvbnN0IGN1cnJlbnRDZWxzaXVzRGF0YSA9IGRhdGEuY2Vsc2l1cztcbiAgICBjb25zdCBjdXJyZW50RmFocmVuaGVpdERhdGEgPSBkYXRhLmZhaHJlbmhlaXQ7XG4gICAgY29uc3QgZGFpbHlGb3JlY2FzdERhdGEgPSBkYXRhLmZvcmVjYXN0LmZvcmVjYXN0X3Blcl9kYXk7XG4gICAgY29uc3QgaG91cmx5Rm9yZWNhc3REYXRhID0gZGF0YS5mb3JlY2FzdC5mb3JlY2FzdF9wZXJfaG91cjtcbiAgICBjb25zdCBjdXJyZW5XZWF0aGVyID0gbmV3IFdlYXRoZXIoXG4gICAgICBjb3VudHJ5LFxuICAgICAgY2l0eSxcbiAgICAgIGxvY2FsX3RpbWUsXG4gICAgICBjb25kaXRpb24sXG4gICAgICBjb25kaXRpb25faWNvbixcbiAgICAgIGh1bWlkaXR5LFxuICAgICAgc3VucmlzZSxcbiAgICAgIHN1bnNldCxcbiAgICAgIGN1cnJlbnRDZWxzaXVzRGF0YSxcbiAgICAgIGN1cnJlbnRGYWhyZW5oZWl0RGF0YSxcbiAgICAgIGhvdXJseUZvcmVjYXN0RGF0YVxuICAgICk7XG4gICAgY29uc3QgZGFpbHlGb3JlY2FzdE9iamVjdCA9IG5ldyBkYWlseUZvcmVjYXN0KGRhaWx5Rm9yZWNhc3REYXRhKTtcbiAgICBjb25zdCBob3VybHlGb3JlY2FzdE9iamVjdCA9IG5ldyBob3VybHlGb3JlY2FzdChob3VybHlGb3JlY2FzdERhdGEpO1xuICAgIGRhaWx5Rm9yZWNhc3RPYmplY3QuZ2VuZXJhdGVEYWlseURhdGEoKTtcbiAgICBkYWlseUZvcmVjYXN0T2JqZWN0LmdlbmVyYXRlRGFpbHlEYXRhQnV0dG9uKCk7XG4gICAgaG91cmx5Rm9yZWNhc3RPYmplY3QuZ2VuZXJhdGVIb3VybHlEYXRhQnV0dG9uKCk7XG4gICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICBjdXJyZW5XZWF0aGVyLmJhc2ljRGF0YURPTSgpO1xuICAgIGN1cnJlbldlYXRoZXIuYWRkaXRpb25hbERhdGFET00oKTtcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiZGFpbHkiLCJkYXRlIiwiY29uZGl0aW9uX2ljb24iLCJ0ZW1wIiwiZGFpbHlEYXRhQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRhaWx5RGF0ZUhvbGRlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJkYWlseUNvbmRpdGlvbkljb24iLCJzZXRBdHRyaWJ1dGUiLCJkYWlseVRlbXBlcmF0dXJlSG9sZGVyIiwiQ29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJidXR0b25Db250YWluZXIiLCJkYWlseUJ1dHRvbiIsImhvdXJseUJ1dHRvbiIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJyZXBsYWNlQ2hpbGQiLCJjaGlsZHJlbiIsImJ1dHRvbnMiLCJiYXNpY0RhdGEiLCJjaXR5IiwiY291bnRyeSIsInRpbWUiLCJjb25kaXRpb25JY29uIiwiY29uZGl0aW9uIiwidGVtcGVyYXR1cmUiLCJkYXRhSG9sZGVyIiwiY2l0eUNvdW50cnlOYW1lIiwidGltZURhdGUiLCJjb25kaXRpb25Db250YWluZXIiLCJjb25kaXRpb25JY29uQ29udGFpbmVyIiwid2VhdGhlckNvbmRpdGlvbiIsImN1cnJlbnRUZW1wZXJhdHVyZSIsImFkZGl0aW9uYWxEYXRhIiwiaHVtaWRpdHkiLCJmZWVsc2xpa2UiLCJ3aW5kc3BlZWQiLCJzdW5yaXNlIiwic3Vuc2V0IiwiYWRkaXRpb25hbERhdGFIb2xkZXIiLCJodW1pZGl0eURhdGEiLCJmZWVsc2xpa2VEYXRhIiwid2luZHNwZWVkRGF0YSIsInNwbGl0Iiwic2hpZnQiLCJqb2luIiwic3VucmlzZURhdGEiLCJzdW5zZXREYXRhIiwiS2V5IiwiY2hhbmNlT2ZSYWluIiwiaG91cmx5Rm9yZWNhc3REYXRhIiwibG9jYWxfdGltZSIsImNoYW5jZU9mUmFpbmNvdW50ZXIiLCJjb3VudGVyIiwiY2hhbmNlQXJyYXkiLCJpIiwiT2JqZWN0Iiwia2V5cyIsImRheTAiLCJob3VyIiwidGltZVNsaWNlciIsIkRhdGUiLCJnZXRUaW1lIiwiY2hhbmNlX29mX3JhaW4iLCJpbml0aWFsQ2hhbmNlIiwiaW5jcmVhc2UiLCJwdXNoIiwiTWF0aCIsInJvdW5kIiwiY2hhbmNlT2ZTbm93IiwiY2hhbmNlT2ZTbm93Y291bnRlciIsImNoYW5jZV9vZl9zbm93IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiV2VhdGhlciIsImNvbnN0cnVjdG9yIiwiY2Vsc2l1c0RhdGEiLCJmYWhyZW5oZWl0RGF0YSIsInRoaXMiLCJiYXNpY0RhdGFET00iLCJhZGRpdGlvbmFsRGF0YURPTSIsIndpbmQiLCJyYWluQ2hhbmNlIiwic25vd0NoYW5jZSIsImRhaWx5Rm9yZWNhc3QiLCJnZW5lcmF0ZURhaWx5RGF0YSIsImRhdGFDb250YWluZXJSZW1vdmVyIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGF0ZU5vdyIsImNvbmRpdGlvbkljb25Ob3ciLCJ0ZW1wZXJhdHVyZU5vdyIsImF2Z190ZW1wQyIsImdlbmVyYXRlRGFpbHlEYXRhQnV0dG9uIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJob3VybHlGb3JlY2FzdCIsImdlbmVyYXRlSG91cmx5RGF0YUJ1dHRvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhc3luYyIsIndoYXRMb2NhdGlvbiIsInJlcXVlc3QiLCJmZXRjaCIsIm1vZGUiLCJyZXNwb25zZSIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiRGF0YU9iamVjdCIsImJhc2ljX2RhdGEiLCJsb2NhdGlvbiIsIm5hbWUiLCJsb2NhbHRpbWUiLCJjdXJyZW50IiwidGV4dCIsImljb24iLCJmb3JlY2FzdCIsImZvcmVjYXN0ZGF5IiwiYXN0cm8iLCJjZWxzaXVzIiwiZmVlbHNsaWtlX2MiLCJ0ZW1wX2MiLCJ3aW5kX2twaCIsImZhaHJlbmhlaXQiLCJmZWVsc2xpa2VfZiIsInRlbXBfZiIsIndpbmRfbXBoIiwiZm9yZWNhc3RfcGVyX2RheSIsImZvcmVjYXN0X3Blcl9ob3VyIiwiZm9yZWNhc3RQZXJEYXkiLCJkYXkiLCJhdmd0ZW1wX2MiLCJhdmdfdGVtcEYiLCJhdmd0ZW1wX2YiLCJmb3JlY2FzdFBlckhvdXIiLCJrIiwidGVtcGVyYXR1cmVDIiwidGVtcGVyYXR1cmVGIiwiZXJyb3IiLCJhcGlSZXF1ZXN0IiwidmFsdWUiLCJ0aGVuIiwiZGF0YSIsImN1cnJlbnRDZWxzaXVzRGF0YSIsImN1cnJlbnRGYWhyZW5oZWl0RGF0YSIsImRhaWx5Rm9yZWNhc3REYXRhIiwiY3VycmVuV2VhdGhlciIsImRhaWx5Rm9yZWNhc3RPYmplY3QiLCJob3VybHlGb3JlY2FzdE9iamVjdCJdLCJzb3VyY2VSb290IjoiIn0=