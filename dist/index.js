(()=>{"use strict";var e={810:(e,t,a)=>{function n(e,t,a,n){let i=document.getElementById("data-bar"),r=document.createElement("p");r.classList.add("dailyDateHolder");let o=e.split("-").slice(1,3).join("/");0==o.split("")[6]&&(o=o.split(""),o.splice(6,1),o=o.join("")),o&&(r.innerHTML=o);let c=document.createElement("img");c.classList.add("dailyConditionIcon"),c.setAttribute("src",t),c.setAttribute("alt","Weather Condition Icon");let d=document.createElement("p");d.classList.add("dailyConditionText"),d.innerHTML=n;let s=document.createElement("h2");s.classList.add("dailyTemperatureHolder"),s.innerHTML=a+" °C";let l=document.createElement("div");l.classList.add("dailyContainer"),l.appendChild(c),l.appendChild(d),l.appendChild(r),l.appendChild(s),i.appendChild(l)}a.d(t,{j:()=>n}),function(){let e=document.getElementById("upper-bar"),t=document.createElement("button");t.classList.add("dailyButton"),t.innerHTML="Daily";let a=document.createElement("button");a.classList.add("hourlyButton"),a.innerHTML="Hourly";let n=document.createElement("div");n.classList.add("arrowContainer");let i=document.createElement("p");i.classList.add("leftArrow");let r=document.createElement("p");r.classList.add("rightArrow"),n.appendChild(i),n.appendChild(r),0==e.childNodes.length?(e.appendChild(t),e.appendChild(a),e.appendChild(n)):(e.replaceChild(t,e.children[0]),e.replaceChild(a,e.children[1]),e.replaceChild(n,e.children[2]))}(),function(){const e=document.getElementById("data-bar");e.addEventListener("wheel",(t=>{t.preventDefault(),e.scrollBy({left:t.deltaY<0?-30:30})}))}()},743:(e,t,a)=>{a.d(t,{X:()=>i,d:()=>r});var n=a(530);function i(e,t,a,n,i,r){const o=document.getElementById("basic-data");let c=document.createElement("h2");c.classList.add("cityCountryNameName"),c.innerHTML=e+", "+t;let d=document.createElement("p");d.classList.add("timeDate"),d.innerHTML=a;let s=document.createElement("div");s.classList.add("conditionContainer");let l=document.createElement("img");l.setAttribute("src",n),l.setAttribute("alt","Weather Condition Icon");let h=document.createElement("h2");h.classList.add("whetherCondition"),h.innerHTML=i,s.appendChild(h),s.appendChild(l);let u=document.createElement("h1");u.classList.add("currentTemperature"),u.innerHTML=r+" °C",0==o.childNodes.length?(o.appendChild(c),o.appendChild(d),o.appendChild(s),o.appendChild(u)):(o.replaceChild(c,o.children[0]),o.replaceChild(d,o.children[1]),o.replaceChild(s,o.children[2]),o.replaceChild(u,o.children[3]))}function r(e,t,a,i,r,o,c){const d=document.getElementById("additional-data");let s=document.createElement("p");s.classList.add("humidityData"),s.innerHTML="Humidity<br>"+e+" %";let l=document.createElement("p");l.classList.add("feelslikeData"),l.innerHTML="Feels Like<br>"+t+" °C";let h=document.createElement("p");h.classList.add("windspeedData"),h.innerHTML="Wind Speed<br>"+a+" kph";let u=document.createElement("p");u.classList.add("chanceRainData"),u.innerHTML="Chance Of Rain<br>"+(0,n.K)(c,o)+" %",0==i[0]&&((i=i.split("")).shift(),i=i.join(""));let p=document.createElement("p");p.classList.add("sunriseData"),p.innerHTML="Sunrise<br>"+i,0==r[0]&&((r=r.split("")).shift(),r=r.join(""));let m=document.createElement("p");m.classList.add("sunsetData"),m.innerHTML="Sunset<br>"+r,0==d.childNodes.length?(d.appendChild(s),d.appendChild(l),d.appendChild(h),d.appendChild(p),d.appendChild(m),d.appendChild(u)):(d.replaceChild(s,d.children[0]),d.replaceChild(l,d.children[1]),d.replaceChild(h,d.children[2]),d.replaceChild(p,d.children[3]),d.replaceChild(m,d.children[4]),d.replaceChild(u,d.children[5]))}},304:(e,t,a)=>{a.d(t,{s:()=>n});const n="f06d23d621c748f1aed94259232004"},530:(e,t,a)=>{function n(e,t){let a=0,n=0,i=[];for(let r=0;r<Object.keys(e.day0.hour).length;r++){let o=e.day0.hour[`hour${r}`].time;if(new Date(o).getTime()>new Date(t).getTime()&&e.day0.hour[`hour${r}`].chance_of_rain>0){if(n+=1,n>1){i[1]=e.day0.hour[`hour${r}`].chance_of_rain;let t=i[0]/100,a=t+i[1]/100*(1-t);i[0]=100*a}else i.push(e.day0.hour[`hour${r}`].chance_of_rain);a+=e.day0.hour[`hour${r}`].chance_of_rain}}return 0==n?0:1==n?a:Math.round(100*i[0])/100}a.d(t,{K:()=>n})}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=a(304),t=a(743),n=a(810);class i{constructor(e,t,a,n,i,r,o,c,d,s,l){this.country=e,this.city=t,this.local_time=a,this.condition=n,this.condition_icon=i,this.humidity=r,this.sunrise=o,this.sunset=c,this.celsiusData=d,this.fahrenheitData=s,this.hourlyForecastData=l}basicDataDOM(){(0,t.X)(this.city,this.country,this.local_time,this.condition_icon,this.condition,this.celsiusData.temperature)}additionalDataDOM(){(0,t.d)(this.humidity,this.celsiusData.feelslike,this.celsiusData.wind,this.sunrise,this.sunset,this.local_time,this.hourlyForecastData)}}class r{constructor(e){this.dailyForecast=e}generateDailyData(){const e=document.getElementById("data-bar");for(;e.firstChild;)e.removeChild(e.firstChild);for(let e=0;e<Object.keys(this.dailyForecast).length;e++){let t=this.dailyForecast["day"+e].date,a=this.dailyForecast["day"+e].condition_icon,i=this.dailyForecast["day"+e].avg_tempC,r=this.dailyForecast["day"+e].condition;(0,n.j)(t,a,i,r)}}generateDailyDataButton(){document.getElementsByClassName("dailyButton")[0].addEventListener("click",(()=>{this.generateDailyData()}))}}class o{constructor(e){this.hourlyForecast=e}generateHourlyData(){const e=document.getElementById("data-bar");for(;e.firstChild;)e.removeChild(e.firstChild);for(let e=0;e<Object.keys(this.hourlyForecast).length;e++)for(let t=0;t<24;t++){let a=this.hourlyForecast["day"+e].hour["hour"+t].time,i=this.hourlyForecast["day"+e].hour["hour"+t].condition_icon,r=this.hourlyForecast["day"+e].hour["hour"+t].temperatureC,o=this.hourlyForecast["day"+e].hour["hour"+t].condition;(0,n.j)(a,i,r,o)}}generateHourlyDataButton(){document.getElementsByClassName("hourlyButton")[0].addEventListener("click",(()=>{this.generateHourlyData()}))}}document.getElementById("searchButton").addEventListener("click",(t=>{t.preventDefault(),async function(t){try{const a=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${e.s}&q=${t}&days=3`,{mode:"cors"}),n=await a.json();console.log(n);const i={basic_data:{country:n.location.country,city:n.location.name,local_time:n.location.localtime,condition:n.current.condition.text,condition_icon:"https:"+n.current.condition.icon,humidity:n.current.humidity,sunrise:n.forecast.forecastday[0].astro.sunrise,sunset:n.forecast.forecastday[0].astro.sunset},celsius:{feelslike:n.current.feelslike_c,temperature:n.current.temp_c,wind:n.current.wind_kph},fahrenheit:{feelslike:n.current.feelslike_f,temperature:n.current.temp_f,wind:n.current.wind_mph},forecast:{forecast_per_day:{},forecast_per_hour:{}}};function r(){for(let e=0;e<3;e++)i.forecast.forecast_per_day["day"+e]={date:n.forecast.forecastday[e].date,condition_icon:"https:"+n.forecast.forecastday[e].day.condition.icon,condition:n.forecast.forecastday[e].day.condition.text,avg_tempC:n.forecast.forecastday[e].day.avgtemp_c,avg_tempF:n.forecast.forecastday[e].day.avgtemp_f}}function o(){for(let e=0;e<3;e++){i.forecast.forecast_per_hour["day"+e]={date:n.forecast.forecastday[e].date},i.forecast.forecast_per_hour["day"+e].hour={};for(let t=0;t<24;t++)i.forecast.forecast_per_hour["day"+e].hour["hour"+t]={condition_icon:"https:"+n.forecast.forecastday[e].hour[t].condition.icon,condition:n.forecast.forecastday[e].hour[t].condition.text,temperatureC:n.forecast.forecastday[e].hour[t].temp_c,temperatureF:n.forecast.forecastday[e].hour[t].temp_f,humidity:n.forecast.forecastday[e].hour[t].humidity,chance_of_rain:n.forecast.forecastday[e].hour[t].chance_of_rain,chance_of_snow:n.forecast.forecastday[e].hour[t].chance_of_snow,time:n.forecast.forecastday[e].hour[t].time}}}return r(),o(),i}catch(c){console.log(c)}}(document.getElementById("location").value).then((e=>{const{country:t,city:a,local_time:n,condition:c,condition_icon:d,humidity:s,sunrise:l,sunset:h}=e.basic_data,u=e.celsius,p=e.fahrenheit,m=e.forecast.forecast_per_day,y=e.forecast.forecast_per_hour,f=new i(t,a,n,c,d,s,l,h,u,p,y),C=new r(m),_=new o(y);C.generateDailyData(),C.generateDailyDataButton(),_.generateHourlyDataButton(),console.log(e),f.basicDataDOM(),f.additionalDataDOM()}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0VoQyxFQUFTWSxTQUFTQyxZQUFZNUUsR0FBR0ksS0FBS21ELEdBQUd3QyxlQUMzQy9ILEtBQU0rRixFQUFTWSxTQUFTQyxZQUFZNUUsR0FBR0ksS0FBS21ELEdBQUd2RixLQUdyRCxDQUNGLENBSUEsT0FGQXdILElBQ0FLLElBQ08xQixDQUNULENBQUUsTUFBTzZCLEdBQ1AvQixRQUFRQyxJQUFJOEIsRUFDZCxDQUNGLENBRUVDLENBekZrQnpLLFNBQVNDLGVBQWUsWUFBWXlLLE9BeUYvQkMsTUFBTUMsSUFDM0IsTUFBTSxRQUNKckksRUFBTyxLQUNQRCxFQUFJLFdBQ0ptQixFQUFVLFVBQ1ZmLEVBQVMsZUFDVDlDLEVBQWMsU0FDZHdELEVBQVEsUUFDUkcsRUFBTyxPQUNQQyxHQUNFb0gsRUFBS2hDLFdBQ0hpQyxFQUFxQkQsRUFBS3RCLFFBQzFCd0IsRUFBd0JGLEVBQUtsQixXQUM3QnFCLEVBQW9CSCxFQUFLekIsU0FBU1csaUJBQ2xDcEcsRUFBcUJrSCxFQUFLekIsU0FBU1ksa0JBQ25DaUIsRUFBZ0IsSUFBSXRFLEVBQ3hCbkUsRUFDQUQsRUFDQW1CLEVBQ0FmLEVBQ0E5QyxFQUNBd0QsRUFDQUcsRUFDQUMsRUFDQXFILEVBQ0FDLEVBQ0FwSCxHQUVJdUgsRUFBc0IsSUFBSS9ELEVBQWM2RCxHQUN4Q0csRUFBdUIsSUFBSXJELEVBQWVuRSxHQUNoRHVILEVBQW9COUQsb0JBQ3BCOEQsRUFBb0J0RCwwQkFDcEJ1RCxFQUFxQmpELDJCQUNyQlEsUUFBUUMsSUFBSWtDLEdBQ1pJLEVBQWNqRSxlQUNkaUUsRUFBY2hFLG1CQUFtQixHQTNIWCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvZm9yZWNhc3RET00uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvbWFpbkRPTS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9teUtleS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy93ZWF0aGVyQ2hhbmNlLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYXRoZXItYXBwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGJ1dHRvbnMoKSB7XG4gIGxldCBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVwcGVyLWJhclwiKTtcblxuICBsZXQgZGFpbHlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBkYWlseUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZGFpbHlCdXR0b25cIik7XG4gIGRhaWx5QnV0dG9uLmlubmVySFRNTCA9IFwiRGFpbHlcIjtcblxuICBsZXQgaG91cmx5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgaG91cmx5QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJob3VybHlCdXR0b25cIik7XG4gIGhvdXJseUJ1dHRvbi5pbm5lckhUTUwgPSBcIkhvdXJseVwiO1xuXG4gIGxldCBhcnJvd0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGFycm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJhcnJvd0NvbnRhaW5lclwiKTtcblxuICBsZXQgbGVmdEFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGxlZnRBcnJvdy5jbGFzc0xpc3QuYWRkKFwibGVmdEFycm93XCIpO1xuXG4gIGxldCByaWdodEFycm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIHJpZ2h0QXJyb3cuY2xhc3NMaXN0LmFkZChcInJpZ2h0QXJyb3dcIik7XG5cbiAgYXJyb3dDb250YWluZXIuYXBwZW5kQ2hpbGQobGVmdEFycm93KTtcbiAgYXJyb3dDb250YWluZXIuYXBwZW5kQ2hpbGQocmlnaHRBcnJvdyk7XG5cbiAgaWYgKGJ1dHRvbkNvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGRhaWx5QnV0dG9uKTtcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoaG91cmx5QnV0dG9uKTtcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYXJyb3dDb250YWluZXIpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkNvbnRhaW5lci5yZXBsYWNlQ2hpbGQoZGFpbHlCdXR0b24sIGJ1dHRvbkNvbnRhaW5lci5jaGlsZHJlblswXSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnJlcGxhY2VDaGlsZChob3VybHlCdXR0b24sIGJ1dHRvbkNvbnRhaW5lci5jaGlsZHJlblsxXSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnJlcGxhY2VDaGlsZChhcnJvd0NvbnRhaW5lciwgYnV0dG9uQ29udGFpbmVyLmNoaWxkcmVuWzJdKTtcbiAgfVxufVxuYnV0dG9ucygpO1xuXG5mdW5jdGlvbiBkYWlseShkYXRlLCBjb25kaXRpb25faWNvbiwgdGVtcCwgY29uZGl0aW9uVGV4dCkge1xuICBsZXQgZGFpbHlEYXRhQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRhLWJhclwiKTtcblxuICBsZXQgZGFpbHlEYXRlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGRhaWx5RGF0ZUhvbGRlci5jbGFzc0xpc3QuYWRkKFwiZGFpbHlEYXRlSG9sZGVyXCIpO1xuICBsZXQgY3V0WWVhciA9IGRhdGUuc3BsaXQoXCItXCIpLnNsaWNlKDEsIDMpO1xuICBsZXQgcmVzdWx0ID0gY3V0WWVhci5qb2luKFwiL1wiKTtcbiAgaWYgKHJlc3VsdC5zcGxpdChcIlwiKVs2XSA9PSAwKSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0LnNwbGl0KFwiXCIpO1xuICAgIGxldCB0ZW1wID0gcmVzdWx0LnNwbGljZSg2LCAxKTtcbiAgICByZXN1bHQgPSByZXN1bHQuam9pbihcIlwiKTtcbiAgfVxuICBpZiAocmVzdWx0KSBkYWlseURhdGVIb2xkZXIuaW5uZXJIVE1MID0gcmVzdWx0O1xuXG4gIGxldCBkYWlseUNvbmRpdGlvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBkYWlseUNvbmRpdGlvbkljb24uY2xhc3NMaXN0LmFkZChcImRhaWx5Q29uZGl0aW9uSWNvblwiKTtcbiAgZGFpbHlDb25kaXRpb25JY29uLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjb25kaXRpb25faWNvbik7XG4gIGRhaWx5Q29uZGl0aW9uSWNvbi5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJXZWF0aGVyIENvbmRpdGlvbiBJY29uXCIpO1xuXG4gIGxldCBkYWlseUNvbmRpdGlvblRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgZGFpbHlDb25kaXRpb25UZXh0LmNsYXNzTGlzdC5hZGQoXCJkYWlseUNvbmRpdGlvblRleHRcIik7XG4gIGRhaWx5Q29uZGl0aW9uVGV4dC5pbm5lckhUTUwgPSBjb25kaXRpb25UZXh0O1xuXG4gIGxldCBkYWlseVRlbXBlcmF0dXJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICBkYWlseVRlbXBlcmF0dXJlSG9sZGVyLmNsYXNzTGlzdC5hZGQoXCJkYWlseVRlbXBlcmF0dXJlSG9sZGVyXCIpO1xuICBkYWlseVRlbXBlcmF0dXJlSG9sZGVyLmlubmVySFRNTCA9IHRlbXAgKyBcIiDCsENcIjtcblxuICBsZXQgQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJkYWlseUNvbnRhaW5lclwiKTtcbiAgQ29udGFpbmVyLmFwcGVuZENoaWxkKGRhaWx5Q29uZGl0aW9uSWNvbik7XG4gIENvbnRhaW5lci5hcHBlbmRDaGlsZChkYWlseUNvbmRpdGlvblRleHQpO1xuICBDb250YWluZXIuYXBwZW5kQ2hpbGQoZGFpbHlEYXRlSG9sZGVyKTtcbiAgQ29udGFpbmVyLmFwcGVuZENoaWxkKGRhaWx5VGVtcGVyYXR1cmVIb2xkZXIpO1xuXG4gIGRhaWx5RGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZChDb250YWluZXIpO1xufVxuXG4vL05vdCB1c2VkIHlldFxuZnVuY3Rpb24gaG91cmx5KGRhdGUsIGNvbmRpdGlvbl9pY29uLCB0ZW1wLCBjb25kaXRpb25UZXh0KSB7XG4gIGxldCBob3VybHlEYXRhQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRhLWJhclwiKTtcblxuICBsZXQgaG91cmx5RGF0ZUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBob3VybHlEYXRlSG9sZGVyLmNsYXNzTGlzdC5hZGQoXCJob3VybHlEYXRlSG9sZGVyXCIpO1xuICBsZXQgY3V0WWVhciA9IGRhdGUuc3BsaXQoXCItXCIpLnNsaWNlKDEsIDMpO1xuICBsZXQgcmVzdWx0ID0gY3V0WWVhci5qb2luKFwiL1wiKTtcbiAgaG91cmx5RGF0ZUhvbGRlci5pbm5lckhUTUwgPSByZXN1bHQ7XG5cbiAgbGV0IGhvdXJseUNvbmRpdGlvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBob3VybHlDb25kaXRpb25JY29uLmNsYXNzTGlzdC5hZGQoXCJob3VybHlDb25kaXRpb25JY29uXCIpO1xuICBob3VybHlDb25kaXRpb25JY29uLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjb25kaXRpb25faWNvbik7XG4gIGhvdXJseUNvbmRpdGlvbkljb24uc2V0QXR0cmlidXRlKFwiYWx0XCIsIFwiV2VhdGhlciBDb25kaXRpb24gSWNvblwiKTtcblxuICBsZXQgaG91cmx5Q29uZGl0aW9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBob3VybHlDb25kaXRpb25UZXh0LmNsYXNzTGlzdC5hZGQoXCJob3VybHlDb25kaXRpb25UZXh0XCIpO1xuICBob3VybHlDb25kaXRpb25UZXh0LmlubmVySFRNTCA9IGNvbmRpdGlvblRleHQ7XG5cbiAgbGV0IGhvdXJseVRlbXBlcmF0dXJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICBob3VybHlUZW1wZXJhdHVyZUhvbGRlci5jbGFzc0xpc3QuYWRkKFwiaG91cmx5VGVtcGVyYXR1cmVIb2xkZXJcIik7XG4gIGhvdXJseVRlbXBlcmF0dXJlSG9sZGVyLmlubmVySFRNTCA9IHRlbXAgKyBcIiDCsENcIjtcblxuICBsZXQgQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJob3VybHlDb250YWluZXJcIik7XG4gIENvbnRhaW5lci5hcHBlbmRDaGlsZChob3VybHlDb25kaXRpb25JY29uKTtcbiAgQ29udGFpbmVyLmFwcGVuZENoaWxkKGhvdXJseUNvbmRpdGlvblRleHQpO1xuICBDb250YWluZXIuYXBwZW5kQ2hpbGQoaG91cmx5RGF0ZUhvbGRlcik7XG4gIENvbnRhaW5lci5hcHBlbmRDaGlsZChob3VybHlUZW1wZXJhdHVyZUhvbGRlcik7XG5cbiAgaG91cmx5RGF0YUNvbnRhaW5lci5hcHBlbmRDaGlsZChDb250YWluZXIpO1xufVxuXG5mdW5jdGlvbiBkYXRhQmFyU2Nyb2xsKCkge1xuICBjb25zdCBzY3JvbGxDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGEtYmFyXCIpO1xuXG4gIHNjcm9sbENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBzY3JvbGxDb250YWluZXIuc2Nyb2xsQnkoe1xuICAgICAgbGVmdDogZXZlbnQuZGVsdGFZIDwgMCA/IC0zMCA6IDMwLFxuICAgIH0pO1xuICB9KTtcbn1cbmRhdGFCYXJTY3JvbGwoKTtcblxuZXhwb3J0IHsgZGFpbHksIGhvdXJseSB9O1xuIiwiaW1wb3J0IHsgY2hhbmNlT2ZSYWluLCBjaGFuY2VPZlNub3cgfSBmcm9tIFwiLi93ZWF0aGVyQ2hhbmNlXCI7XG5cbmZ1bmN0aW9uIGJhc2ljRGF0YShjaXR5LCBjb3VudHJ5LCB0aW1lLCBjb25kaXRpb25JY29uLCBjb25kaXRpb24sIHRlbXBlcmF0dXJlKSB7XG4gIGNvbnN0IGRhdGFIb2xkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhc2ljLWRhdGFcIik7XG5cbiAgbGV0IGNpdHlDb3VudHJ5TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgY2l0eUNvdW50cnlOYW1lLmNsYXNzTGlzdC5hZGQoXCJjaXR5Q291bnRyeU5hbWVOYW1lXCIpO1xuICBjaXR5Q291bnRyeU5hbWUuaW5uZXJIVE1MID0gY2l0eSArIFwiLCBcIiArIGNvdW50cnk7XG5cbiAgbGV0IHRpbWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIHRpbWVEYXRlLmNsYXNzTGlzdC5hZGQoXCJ0aW1lRGF0ZVwiKTtcbiAgdGltZURhdGUuaW5uZXJIVE1MID0gdGltZTtcblxuICBsZXQgY29uZGl0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29uZGl0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJjb25kaXRpb25Db250YWluZXJcIik7XG5cbiAgbGV0IGNvbmRpdGlvbkljb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBjb25kaXRpb25JY29uQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjb25kaXRpb25JY29uKTtcbiAgY29uZGl0aW9uSWNvbkNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJXZWF0aGVyIENvbmRpdGlvbiBJY29uXCIpO1xuXG4gIGxldCB3ZWF0aGVyQ29uZGl0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICB3ZWF0aGVyQ29uZGl0aW9uLmNsYXNzTGlzdC5hZGQoXCJ3aGV0aGVyQ29uZGl0aW9uXCIpO1xuICB3ZWF0aGVyQ29uZGl0aW9uLmlubmVySFRNTCA9IGNvbmRpdGlvbjtcbiAgY29uZGl0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHdlYXRoZXJDb25kaXRpb24pO1xuICBjb25kaXRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoY29uZGl0aW9uSWNvbkNvbnRhaW5lcik7XG5cbiAgbGV0IGN1cnJlbnRUZW1wZXJhdHVyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgY3VycmVudFRlbXBlcmF0dXJlLmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50VGVtcGVyYXR1cmVcIik7XG4gIGN1cnJlbnRUZW1wZXJhdHVyZS5pbm5lckhUTUwgPSB0ZW1wZXJhdHVyZSArIFwiIMKwQ1wiO1xuXG4gIGlmIChkYXRhSG9sZGVyLmNoaWxkTm9kZXMubGVuZ3RoID09IDApIHtcbiAgICBkYXRhSG9sZGVyLmFwcGVuZENoaWxkKGNpdHlDb3VudHJ5TmFtZSk7XG4gICAgZGF0YUhvbGRlci5hcHBlbmRDaGlsZCh0aW1lRGF0ZSk7XG4gICAgZGF0YUhvbGRlci5hcHBlbmRDaGlsZChjb25kaXRpb25Db250YWluZXIpO1xuICAgIGRhdGFIb2xkZXIuYXBwZW5kQ2hpbGQoY3VycmVudFRlbXBlcmF0dXJlKTtcbiAgfSBlbHNlIHtcbiAgICBkYXRhSG9sZGVyLnJlcGxhY2VDaGlsZChjaXR5Q291bnRyeU5hbWUsIGRhdGFIb2xkZXIuY2hpbGRyZW5bMF0pO1xuICAgIGRhdGFIb2xkZXIucmVwbGFjZUNoaWxkKHRpbWVEYXRlLCBkYXRhSG9sZGVyLmNoaWxkcmVuWzFdKTtcbiAgICBkYXRhSG9sZGVyLnJlcGxhY2VDaGlsZChjb25kaXRpb25Db250YWluZXIsIGRhdGFIb2xkZXIuY2hpbGRyZW5bMl0pO1xuICAgIGRhdGFIb2xkZXIucmVwbGFjZUNoaWxkKGN1cnJlbnRUZW1wZXJhdHVyZSwgZGF0YUhvbGRlci5jaGlsZHJlblszXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWRkaXRpb25hbERhdGEoXG4gIGh1bWlkaXR5LFxuICBmZWVsc2xpa2UsXG4gIHdpbmRzcGVlZCxcbiAgc3VucmlzZSxcbiAgc3Vuc2V0LFxuICBsb2NhbF90aW1lLFxuICBob3VybHlGb3JlY2FzdERhdGFcbikge1xuICBjb25zdCBhZGRpdGlvbmFsRGF0YUhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkaXRpb25hbC1kYXRhXCIpO1xuXG4gIGxldCBodW1pZGl0eURhdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgaHVtaWRpdHlEYXRhLmNsYXNzTGlzdC5hZGQoXCJodW1pZGl0eURhdGFcIik7XG4gIGh1bWlkaXR5RGF0YS5pbm5lckhUTUwgPSBcIkh1bWlkaXR5XCIgKyBcIjxicj5cIiArIGh1bWlkaXR5ICsgXCIgJVwiO1xuXG4gIGxldCBmZWVsc2xpa2VEYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIGZlZWxzbGlrZURhdGEuY2xhc3NMaXN0LmFkZChcImZlZWxzbGlrZURhdGFcIik7XG4gIGZlZWxzbGlrZURhdGEuaW5uZXJIVE1MID0gXCJGZWVscyBMaWtlXCIgKyBcIjxicj5cIiArIGZlZWxzbGlrZSArIFwiIMKwQ1wiO1xuXG4gIGxldCB3aW5kc3BlZWREYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIHdpbmRzcGVlZERhdGEuY2xhc3NMaXN0LmFkZChcIndpbmRzcGVlZERhdGFcIik7XG4gIHdpbmRzcGVlZERhdGEuaW5uZXJIVE1MID0gXCJXaW5kIFNwZWVkXCIgKyBcIjxicj5cIiArIHdpbmRzcGVlZCArIFwiIGtwaFwiO1xuXG4gIGxldCBjaGFuY2VSYWluRGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBjaGFuY2VSYWluRGF0YS5jbGFzc0xpc3QuYWRkKFwiY2hhbmNlUmFpbkRhdGFcIik7XG4gIGNoYW5jZVJhaW5EYXRhLmlubmVySFRNTCA9XG4gICAgXCJDaGFuY2UgT2YgUmFpblwiICtcbiAgICBcIjxicj5cIiArXG4gICAgY2hhbmNlT2ZSYWluKGhvdXJseUZvcmVjYXN0RGF0YSwgbG9jYWxfdGltZSkgK1xuICAgIFwiICVcIjtcblxuICAvLyBsZXQgY2hhbmNlU25vd0RhdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgLy8gY2hhbmNlU25vd0RhdGEuY2xhc3NMaXN0LmFkZChcImNoYW5jZVNub3dEYXRhXCIpO1xuICAvLyBjaGFuY2VTbm93RGF0YS5pbm5lckhUTUwgPVxuICAvLyAgIFwiQ2hhbmNlIE9mIFNub3dcIiArIFwiPGJyPlwiICsgY2hhbmNlT2ZTbm93KGhvdXJseUZvcmVjYXN0RGF0YSwgbG9jYWxfdGltZSkgKyBcIiAlXCI7XG5cbiAgaWYgKHN1bnJpc2VbMF0gPT0gMCkge1xuICAgIHN1bnJpc2UgPSBzdW5yaXNlLnNwbGl0KFwiXCIpO1xuICAgIHN1bnJpc2Uuc2hpZnQoKTtcbiAgICBzdW5yaXNlID0gc3VucmlzZS5qb2luKFwiXCIpO1xuICB9XG4gIGxldCBzdW5yaXNlRGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBzdW5yaXNlRGF0YS5jbGFzc0xpc3QuYWRkKFwic3VucmlzZURhdGFcIik7XG4gIHN1bnJpc2VEYXRhLmlubmVySFRNTCA9IFwiU3VucmlzZVwiICsgXCI8YnI+XCIgKyBzdW5yaXNlO1xuXG4gIGlmIChzdW5zZXRbMF0gPT0gMCkge1xuICAgIHN1bnNldCA9IHN1bnNldC5zcGxpdChcIlwiKTtcbiAgICBzdW5zZXQuc2hpZnQoKTtcbiAgICBzdW5zZXQgPSBzdW5zZXQuam9pbihcIlwiKTtcbiAgfVxuICBsZXQgc3Vuc2V0RGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBzdW5zZXREYXRhLmNsYXNzTGlzdC5hZGQoXCJzdW5zZXREYXRhXCIpO1xuICBzdW5zZXREYXRhLmlubmVySFRNTCA9IFwiU3Vuc2V0XCIgKyBcIjxicj5cIiArIHN1bnNldDtcblxuICBpZiAoYWRkaXRpb25hbERhdGFIb2xkZXIuY2hpbGROb2Rlcy5sZW5ndGggPT0gMCkge1xuICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLmFwcGVuZENoaWxkKGh1bWlkaXR5RGF0YSk7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIuYXBwZW5kQ2hpbGQoZmVlbHNsaWtlRGF0YSk7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIuYXBwZW5kQ2hpbGQod2luZHNwZWVkRGF0YSk7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIuYXBwZW5kQ2hpbGQoc3VucmlzZURhdGEpO1xuICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLmFwcGVuZENoaWxkKHN1bnNldERhdGEpO1xuICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLmFwcGVuZENoaWxkKGNoYW5jZVJhaW5EYXRhKTtcbiAgICAvLyBhZGRpdGlvbmFsRGF0YUhvbGRlci5hcHBlbmRDaGlsZChjaGFuY2VTbm93RGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIucmVwbGFjZUNoaWxkKFxuICAgICAgaHVtaWRpdHlEYXRhLFxuICAgICAgYWRkaXRpb25hbERhdGFIb2xkZXIuY2hpbGRyZW5bMF1cbiAgICApO1xuICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLnJlcGxhY2VDaGlsZChcbiAgICAgIGZlZWxzbGlrZURhdGEsXG4gICAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5jaGlsZHJlblsxXVxuICAgICk7XG4gICAgYWRkaXRpb25hbERhdGFIb2xkZXIucmVwbGFjZUNoaWxkKFxuICAgICAgd2luZHNwZWVkRGF0YSxcbiAgICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLmNoaWxkcmVuWzJdXG4gICAgKTtcbiAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5yZXBsYWNlQ2hpbGQoXG4gICAgICBzdW5yaXNlRGF0YSxcbiAgICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLmNoaWxkcmVuWzNdXG4gICAgKTtcbiAgICBhZGRpdGlvbmFsRGF0YUhvbGRlci5yZXBsYWNlQ2hpbGQoXG4gICAgICBzdW5zZXREYXRhLFxuICAgICAgYWRkaXRpb25hbERhdGFIb2xkZXIuY2hpbGRyZW5bNF1cbiAgICApO1xuICAgIGFkZGl0aW9uYWxEYXRhSG9sZGVyLnJlcGxhY2VDaGlsZChcbiAgICAgIGNoYW5jZVJhaW5EYXRhLFxuICAgICAgYWRkaXRpb25hbERhdGFIb2xkZXIuY2hpbGRyZW5bNV1cbiAgICApO1xuICAgIC8vIGFkZGl0aW9uYWxEYXRhSG9sZGVyLnJlcGxhY2VDaGlsZChcbiAgICAvLyAgIGNoYW5jZVNub3dEYXRhLFxuICAgIC8vICAgYWRkaXRpb25hbERhdGFIb2xkZXIuY2hpbGRyZW5bNl1cbiAgICAvLyApO1xuICB9XG59XG5cbmV4cG9ydCB7IGJhc2ljRGF0YSwgYWRkaXRpb25hbERhdGEgfTtcbiIsImV4cG9ydCBjb25zdCBLZXkgPSBcImYwNmQyM2Q2MjFjNzQ4ZjFhZWQ5NDI1OTIzMjAwNFwiO1xuIiwiLy9SZXR1cm5pbmcgY2hhbmNlIG9mIHJhaW4gZm9yIHRoZSByZXN0IG9mIHRoZSBkYXkgbG9jYWwgZGF0ZSB0byBtaWRuaWdodFxuZnVuY3Rpb24gY2hhbmNlT2ZSYWluKGhvdXJseUZvcmVjYXN0RGF0YSwgbG9jYWxfdGltZSkge1xuICBsZXQgY2hhbmNlT2ZSYWluY291bnRlciA9IDA7XG4gIGxldCBjb3VudGVyID0gMDtcbiAgbGV0IGNoYW5jZUFycmF5ID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgT2JqZWN0LmtleXMoaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cikubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgdGltZVNsaWNlciA9IGhvdXJseUZvcmVjYXN0RGF0YS5kYXkwLmhvdXJbYGhvdXIke2l9YF0udGltZTtcbiAgICBpZiAobmV3IERhdGUodGltZVNsaWNlcikuZ2V0VGltZSgpID4gbmV3IERhdGUobG9jYWxfdGltZSkuZ2V0VGltZSgpKSB7XG4gICAgICBpZiAoaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cltgaG91ciR7aX1gXS5jaGFuY2Vfb2ZfcmFpbiA+IDApIHtcbiAgICAgICAgY291bnRlciArPSAxO1xuICAgICAgICBpZiAoY291bnRlciA+IDEpIHtcbiAgICAgICAgICBjaGFuY2VBcnJheVsxXSA9XG4gICAgICAgICAgICBob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9yYWluO1xuICAgICAgICAgIGxldCBpbml0aWFsQ2hhbmNlID0gY2hhbmNlQXJyYXlbMF0gLyAxMDA7XG4gICAgICAgICAgbGV0IGluY3JlYXNlID1cbiAgICAgICAgICAgIGluaXRpYWxDaGFuY2UgKyAoY2hhbmNlQXJyYXlbMV0gLyAxMDApICogKDEgLSBpbml0aWFsQ2hhbmNlKTtcbiAgICAgICAgICBjaGFuY2VBcnJheVswXSA9IGluY3JlYXNlICogMTAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5jZUFycmF5LnB1c2goXG4gICAgICAgICAgICBob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9yYWluXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjaGFuY2VPZlJhaW5jb3VudGVyICs9XG4gICAgICAgICAgaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cltgaG91ciR7aX1gXS5jaGFuY2Vfb2ZfcmFpbjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGNvdW50ZXIgPT0gMCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKGNvdW50ZXIgPT0gMSkge1xuICAgIHJldHVybiBjaGFuY2VPZlJhaW5jb3VudGVyO1xuICB9XG5cbiAgcmV0dXJuIE1hdGgucm91bmQoY2hhbmNlQXJyYXlbMF0gKiAxMDApIC8gMTAwO1xufVxuXG4vL1JldHVybmluZyBjaGFuY2Ugb2Ygc25vdyBmb3IgdGhlIHJlc3Qgb2YgdGhlIGRheSBsb2NhbCBkYXRlIHRvIG1pZG5pZ2h0XG5mdW5jdGlvbiBjaGFuY2VPZlNub3coaG91cmx5Rm9yZWNhc3REYXRhLCBsb2NhbF90aW1lKSB7XG4gIGxldCBjaGFuY2VPZlNub3djb3VudGVyID0gMDtcbiAgbGV0IGNvdW50ZXIgPSAwO1xuICBsZXQgY2hhbmNlQXJyYXkgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyhob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyKS5sZW5ndGg7IGkrKykge1xuICAgIGxldCB0aW1lU2xpY2VyID0gaG91cmx5Rm9yZWNhc3REYXRhLmRheTAuaG91cltgaG91ciR7aX1gXS50aW1lO1xuICAgIGlmIChuZXcgRGF0ZSh0aW1lU2xpY2VyKS5nZXRUaW1lKCkgPiBuZXcgRGF0ZShsb2NhbF90aW1lKS5nZXRUaW1lKCkpIHtcbiAgICAgIGlmIChob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9zbm93ID4gMCkge1xuICAgICAgICBjb3VudGVyICs9IDE7XG4gICAgICAgIGlmIChjb3VudGVyID4gMSkge1xuICAgICAgICAgIGNoYW5jZUFycmF5WzFdID1cbiAgICAgICAgICAgIGhvdXJseUZvcmVjYXN0RGF0YS5kYXkwLmhvdXJbYGhvdXIke2l9YF0uY2hhbmNlX29mX3Nub3c7XG4gICAgICAgICAgbGV0IGluaXRpYWxDaGFuY2UgPSBjaGFuY2VBcnJheVswXSAvIDEwMDtcbiAgICAgICAgICBsZXQgaW5jcmVhc2UgPVxuICAgICAgICAgICAgaW5pdGlhbENoYW5jZSArIChjaGFuY2VBcnJheVsxXSAvIDEwMCkgKiAoMSAtIGluaXRpYWxDaGFuY2UpO1xuICAgICAgICAgIGNoYW5jZUFycmF5WzBdID0gaW5jcmVhc2UgKiAxMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hhbmNlQXJyYXkucHVzaChcbiAgICAgICAgICAgIGhvdXJseUZvcmVjYXN0RGF0YS5kYXkwLmhvdXJbYGhvdXIke2l9YF0uY2hhbmNlX29mX3Nub3dcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5jZU9mU25vd2NvdW50ZXIgKz1cbiAgICAgICAgICBob3VybHlGb3JlY2FzdERhdGEuZGF5MC5ob3VyW2Bob3VyJHtpfWBdLmNoYW5jZV9vZl9zbm93O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoY291bnRlciA9PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSBpZiAoY291bnRlciA9PSAxKSB7XG4gICAgcmV0dXJuIGNoYW5jZU9mU25vd2NvdW50ZXI7XG4gIH1cblxuICByZXR1cm4gTWF0aC5yb3VuZChjaGFuY2VBcnJheVswXSAqIDEwMCkgLyAxMDA7XG59XG5cbmV4cG9ydCB7IGNoYW5jZU9mUmFpbiwgY2hhbmNlT2ZTbm93IH07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgeyBLZXkgfSBmcm9tIFwiLi9teUtleVwiO1xuaW1wb3J0IHsgYmFzaWNEYXRhLCBhZGRpdGlvbmFsRGF0YSB9IGZyb20gXCIuL21haW5ET01cIjtcbmltcG9ydCB7IGRhaWx5QnV0dG9uLCBob3VybHlCdXR0b24sIGRhaWx5IH0gZnJvbSBcIi4vZm9yZWNhc3RET01cIjtcblxuY2xhc3MgV2VhdGhlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvdW50cnksXG4gICAgY2l0eSxcbiAgICBsb2NhbF90aW1lLFxuICAgIGNvbmRpdGlvbixcbiAgICBjb25kaXRpb25faWNvbixcbiAgICBodW1pZGl0eSxcbiAgICBzdW5yaXNlLFxuICAgIHN1bnNldCxcbiAgICBjZWxzaXVzRGF0YSxcbiAgICBmYWhyZW5oZWl0RGF0YSxcbiAgICBob3VybHlGb3JlY2FzdERhdGFcbiAgKSB7XG4gICAgdGhpcy5jb3VudHJ5ID0gY291bnRyeTtcbiAgICB0aGlzLmNpdHkgPSBjaXR5O1xuICAgIHRoaXMubG9jYWxfdGltZSA9IGxvY2FsX3RpbWU7XG4gICAgdGhpcy5jb25kaXRpb24gPSBjb25kaXRpb247XG4gICAgdGhpcy5jb25kaXRpb25faWNvbiA9IGNvbmRpdGlvbl9pY29uO1xuICAgIHRoaXMuaHVtaWRpdHkgPSBodW1pZGl0eTtcbiAgICB0aGlzLnN1bnJpc2UgPSBzdW5yaXNlO1xuICAgIHRoaXMuc3Vuc2V0ID0gc3Vuc2V0O1xuICAgIHRoaXMuY2Vsc2l1c0RhdGEgPSBjZWxzaXVzRGF0YTtcbiAgICB0aGlzLmZhaHJlbmhlaXREYXRhID0gZmFocmVuaGVpdERhdGE7XG4gICAgdGhpcy5ob3VybHlGb3JlY2FzdERhdGEgPSBob3VybHlGb3JlY2FzdERhdGE7XG4gIH1cbiAgYmFzaWNEYXRhRE9NKCkge1xuICAgIGJhc2ljRGF0YShcbiAgICAgIHRoaXMuY2l0eSxcbiAgICAgIHRoaXMuY291bnRyeSxcbiAgICAgIHRoaXMubG9jYWxfdGltZSxcbiAgICAgIHRoaXMuY29uZGl0aW9uX2ljb24sXG4gICAgICB0aGlzLmNvbmRpdGlvbixcbiAgICAgIHRoaXMuY2Vsc2l1c0RhdGEudGVtcGVyYXR1cmVcbiAgICApO1xuICB9XG5cbiAgYWRkaXRpb25hbERhdGFET00oKSB7XG4gICAgYWRkaXRpb25hbERhdGEoXG4gICAgICB0aGlzLmh1bWlkaXR5LFxuICAgICAgdGhpcy5jZWxzaXVzRGF0YS5mZWVsc2xpa2UsXG4gICAgICB0aGlzLmNlbHNpdXNEYXRhLndpbmQsXG4gICAgICB0aGlzLnN1bnJpc2UsXG4gICAgICB0aGlzLnN1bnNldCxcbiAgICAgIHRoaXMubG9jYWxfdGltZSxcbiAgICAgIHRoaXMuaG91cmx5Rm9yZWNhc3REYXRhXG4gICAgKTtcbiAgfVxufVxuXG5jbGFzcyBkYWlseUZvcmVjYXN0IHtcbiAgY29uc3RydWN0b3IoZGFpbHlGb3JlY2FzdCkge1xuICAgIHRoaXMuZGFpbHlGb3JlY2FzdCA9IGRhaWx5Rm9yZWNhc3Q7XG4gIH1cbiAgZ2VuZXJhdGVEYWlseURhdGEoKSB7XG4gICAgY29uc3QgZGF0YUNvbnRhaW5lclJlbW92ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGEtYmFyXCIpO1xuICAgIHdoaWxlIChkYXRhQ29udGFpbmVyUmVtb3Zlci5maXJzdENoaWxkKSB7XG4gICAgICBkYXRhQ29udGFpbmVyUmVtb3Zlci5yZW1vdmVDaGlsZChkYXRhQ29udGFpbmVyUmVtb3Zlci5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyh0aGlzLmRhaWx5Rm9yZWNhc3QpLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZGF0ZU5vdyA9IHRoaXMuZGFpbHlGb3JlY2FzdFtcImRheVwiICsgaV0uZGF0ZTtcbiAgICAgIGxldCBjb25kaXRpb25JY29uTm93ID0gdGhpcy5kYWlseUZvcmVjYXN0W1wiZGF5XCIgKyBpXS5jb25kaXRpb25faWNvbjtcbiAgICAgIGxldCB0ZW1wZXJhdHVyZU5vdyA9IHRoaXMuZGFpbHlGb3JlY2FzdFtcImRheVwiICsgaV0uYXZnX3RlbXBDO1xuICAgICAgbGV0IGNvbmRpdGlvblRleHQgPSB0aGlzLmRhaWx5Rm9yZWNhc3RbXCJkYXlcIiArIGldLmNvbmRpdGlvbjtcbiAgICAgIGRhaWx5KGRhdGVOb3csIGNvbmRpdGlvbkljb25Ob3csIHRlbXBlcmF0dXJlTm93LCBjb25kaXRpb25UZXh0KTtcbiAgICB9XG4gIH1cbiAgZ2VuZXJhdGVEYWlseURhdGFCdXR0b24oKSB7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRhaWx5QnV0dG9uXCIpWzBdO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5nZW5lcmF0ZURhaWx5RGF0YSgpO1xuICAgIH0pO1xuICB9XG59XG5jbGFzcyBob3VybHlGb3JlY2FzdCB7XG4gIGNvbnN0cnVjdG9yKGhvdXJseUZvcmVjYXN0KSB7XG4gICAgdGhpcy5ob3VybHlGb3JlY2FzdCA9IGhvdXJseUZvcmVjYXN0O1xuICB9XG4gIGdlbmVyYXRlSG91cmx5RGF0YSgpIHtcbiAgICBjb25zdCBkYXRhQ29udGFpbmVyUmVtb3ZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0YS1iYXJcIik7XG4gICAgd2hpbGUgKGRhdGFDb250YWluZXJSZW1vdmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGRhdGFDb250YWluZXJSZW1vdmVyLnJlbW92ZUNoaWxkKGRhdGFDb250YWluZXJSZW1vdmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHRoaXMuaG91cmx5Rm9yZWNhc3QpLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IDI0OyBrKyspIHtcbiAgICAgICAgbGV0IGRhdGVOb3cgPSB0aGlzLmhvdXJseUZvcmVjYXN0W1wiZGF5XCIgKyBpXS5ob3VyW1wiaG91clwiICsga10udGltZTtcbiAgICAgICAgbGV0IGNvbmRpdGlvbkljb25Ob3cgPVxuICAgICAgICAgIHRoaXMuaG91cmx5Rm9yZWNhc3RbXCJkYXlcIiArIGldLmhvdXJbXCJob3VyXCIgKyBrXS5jb25kaXRpb25faWNvbjtcbiAgICAgICAgbGV0IHRlbXBlcmF0dXJlTm93ID1cbiAgICAgICAgICB0aGlzLmhvdXJseUZvcmVjYXN0W1wiZGF5XCIgKyBpXS5ob3VyW1wiaG91clwiICsga10udGVtcGVyYXR1cmVDO1xuICAgICAgICBsZXQgY29uZGl0aW9uVGV4dCA9XG4gICAgICAgICAgdGhpcy5ob3VybHlGb3JlY2FzdFtcImRheVwiICsgaV0uaG91cltcImhvdXJcIiArIGtdLmNvbmRpdGlvbjtcbiAgICAgICAgZGFpbHkoZGF0ZU5vdywgY29uZGl0aW9uSWNvbk5vdywgdGVtcGVyYXR1cmVOb3csIGNvbmRpdGlvblRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBnZW5lcmF0ZUhvdXJseURhdGFCdXR0b24oKSB7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImhvdXJseUJ1dHRvblwiKVswXTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuZ2VuZXJhdGVIb3VybHlEYXRhKCk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy9idXR0b24gdGFraW5nIGxvY2F0aW9uIGZyb20gaW5wdXQgdGhhdCBmaXJlIGFwaSByZXF1ZXN0IGFuZCBsb2cgZGF0YVxuZnVuY3Rpb24gdGFrZUxvY2F0aW9uKCkge1xuICBjb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlYXJjaEJ1dHRvblwiKTtcbiAgc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCB0ZXN0aW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvY2F0aW9uXCIpLnZhbHVlO1xuICAgIGZpcmVSZXF1ZXN0KHRlc3RpbnB1dCk7XG4gIH0pO1xufVxudGFrZUxvY2F0aW9uKCk7XG5cbmFzeW5jIGZ1bmN0aW9uIGFwaVJlcXVlc3Qod2hhdExvY2F0aW9uKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vYXBpLndlYXRoZXJhcGkuY29tL3YxL2ZvcmVjYXN0Lmpzb24/a2V5PSR7S2V5fSZxPSR7d2hhdExvY2F0aW9ufSZkYXlzPTNgLFxuICAgICAge1xuICAgICAgICBtb2RlOiBcImNvcnNcIixcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgIGNvbnN0IERhdGFPYmplY3QgPSB7XG4gICAgICBiYXNpY19kYXRhOiB7XG4gICAgICAgIGNvdW50cnk6IHJlc3BvbnNlLmxvY2F0aW9uLmNvdW50cnksXG4gICAgICAgIGNpdHk6IHJlc3BvbnNlLmxvY2F0aW9uLm5hbWUsXG4gICAgICAgIGxvY2FsX3RpbWU6IHJlc3BvbnNlLmxvY2F0aW9uLmxvY2FsdGltZSxcbiAgICAgICAgY29uZGl0aW9uOiByZXNwb25zZS5jdXJyZW50LmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICBjb25kaXRpb25faWNvbjogXCJodHRwczpcIiArIHJlc3BvbnNlLmN1cnJlbnQuY29uZGl0aW9uLmljb24sXG4gICAgICAgIGh1bWlkaXR5OiByZXNwb25zZS5jdXJyZW50Lmh1bWlkaXR5LFxuICAgICAgICBzdW5yaXNlOiByZXNwb25zZS5mb3JlY2FzdC5mb3JlY2FzdGRheVswXS5hc3Ryby5zdW5yaXNlLFxuICAgICAgICBzdW5zZXQ6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5WzBdLmFzdHJvLnN1bnNldCxcbiAgICAgIH0sXG4gICAgICBjZWxzaXVzOiB7XG4gICAgICAgIGZlZWxzbGlrZTogcmVzcG9uc2UuY3VycmVudC5mZWVsc2xpa2VfYyxcbiAgICAgICAgdGVtcGVyYXR1cmU6IHJlc3BvbnNlLmN1cnJlbnQudGVtcF9jLFxuICAgICAgICB3aW5kOiByZXNwb25zZS5jdXJyZW50LndpbmRfa3BoLFxuICAgICAgfSxcbiAgICAgIGZhaHJlbmhlaXQ6IHtcbiAgICAgICAgZmVlbHNsaWtlOiByZXNwb25zZS5jdXJyZW50LmZlZWxzbGlrZV9mLFxuICAgICAgICB0ZW1wZXJhdHVyZTogcmVzcG9uc2UuY3VycmVudC50ZW1wX2YsXG4gICAgICAgIHdpbmQ6IHJlc3BvbnNlLmN1cnJlbnQud2luZF9tcGgsXG4gICAgICB9LFxuICAgICAgZm9yZWNhc3Q6IHtcbiAgICAgICAgLy9Mb29waW5nIHBlciBkYXlzIGFuZCBob3VycyBpbiBmdW5jdGlvbiBmb3JlY2FzdFBlckhvdXJDZWxzaXVzIGFuZCBmb3JlY2FzdF9wZXJfaG91cl9GYWhyZW5oZWl0XG4gICAgICAgIGZvcmVjYXN0X3Blcl9kYXk6IHt9LFxuICAgICAgICBmb3JlY2FzdF9wZXJfaG91cjoge30sXG4gICAgICB9LFxuICAgIH07XG4gICAgZnVuY3Rpb24gZm9yZWNhc3RQZXJEYXkoKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBEYXRhT2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0X3Blcl9kYXlbXCJkYXlcIiArIGldID0ge1xuICAgICAgICAgIGRhdGU6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRhdGUsXG4gICAgICAgICAgY29uZGl0aW9uX2ljb246XG4gICAgICAgICAgICBcImh0dHBzOlwiICsgcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5LmNvbmRpdGlvbi5pY29uLFxuICAgICAgICAgIGNvbmRpdGlvbjogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5LmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICAgIGF2Z190ZW1wQzogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF5LmF2Z3RlbXBfYyxcbiAgICAgICAgICBhdmdfdGVtcEY6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmRheS5hdmd0ZW1wX2YsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9yZWNhc3RQZXJIb3VyKCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgRGF0YU9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdF9wZXJfaG91cltcImRheVwiICsgaV0gPSB7XG4gICAgICAgICAgZGF0ZTogcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uZGF0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YU9iamVjdC5mb3JlY2FzdC5mb3JlY2FzdF9wZXJfaG91cltcImRheVwiICsgaV0uaG91ciA9IHt9O1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDI0OyBrKyspIHtcbiAgICAgICAgICBEYXRhT2JqZWN0LmZvcmVjYXN0LmZvcmVjYXN0X3Blcl9ob3VyW1wiZGF5XCIgKyBpXS5ob3VyW1wiaG91clwiICsga10gPSB7XG4gICAgICAgICAgICBjb25kaXRpb25faWNvbjpcbiAgICAgICAgICAgICAgXCJodHRwczpcIiArXG4gICAgICAgICAgICAgIHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmhvdXJba10uY29uZGl0aW9uLmljb24sXG4gICAgICAgICAgICBjb25kaXRpb246IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmhvdXJba10uY29uZGl0aW9uLnRleHQsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZUM6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmhvdXJba10udGVtcF9jLFxuICAgICAgICAgICAgdGVtcGVyYXR1cmVGOiByZXNwb25zZS5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5ob3VyW2tdLnRlbXBfZixcbiAgICAgICAgICAgIGh1bWlkaXR5OiByZXNwb25zZS5mb3JlY2FzdC5mb3JlY2FzdGRheVtpXS5ob3VyW2tdLmh1bWlkaXR5LFxuICAgICAgICAgICAgY2hhbmNlX29mX3JhaW46XG4gICAgICAgICAgICAgIHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmhvdXJba10uY2hhbmNlX29mX3JhaW4sXG4gICAgICAgICAgICBjaGFuY2Vfb2Zfc25vdzpcbiAgICAgICAgICAgICAgcmVzcG9uc2UuZm9yZWNhc3QuZm9yZWNhc3RkYXlbaV0uaG91cltrXS5jaGFuY2Vfb2Zfc25vdyxcbiAgICAgICAgICAgIHRpbWU6IHJlc3BvbnNlLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W2ldLmhvdXJba10udGltZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yZWNhc3RQZXJEYXkoKTtcbiAgICBmb3JlY2FzdFBlckhvdXIoKTtcbiAgICByZXR1cm4gRGF0YU9iamVjdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIGZpcmVSZXF1ZXN0KGlucHV0dmFsdWUpIHtcbiAgYXBpUmVxdWVzdChpbnB1dHZhbHVlKS50aGVuKChkYXRhKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgY291bnRyeSxcbiAgICAgIGNpdHksXG4gICAgICBsb2NhbF90aW1lLFxuICAgICAgY29uZGl0aW9uLFxuICAgICAgY29uZGl0aW9uX2ljb24sXG4gICAgICBodW1pZGl0eSxcbiAgICAgIHN1bnJpc2UsXG4gICAgICBzdW5zZXQsXG4gICAgfSA9IGRhdGEuYmFzaWNfZGF0YTtcbiAgICBjb25zdCBjdXJyZW50Q2Vsc2l1c0RhdGEgPSBkYXRhLmNlbHNpdXM7XG4gICAgY29uc3QgY3VycmVudEZhaHJlbmhlaXREYXRhID0gZGF0YS5mYWhyZW5oZWl0O1xuICAgIGNvbnN0IGRhaWx5Rm9yZWNhc3REYXRhID0gZGF0YS5mb3JlY2FzdC5mb3JlY2FzdF9wZXJfZGF5O1xuICAgIGNvbnN0IGhvdXJseUZvcmVjYXN0RGF0YSA9IGRhdGEuZm9yZWNhc3QuZm9yZWNhc3RfcGVyX2hvdXI7XG4gICAgY29uc3QgY3VycmVuV2VhdGhlciA9IG5ldyBXZWF0aGVyKFxuICAgICAgY291bnRyeSxcbiAgICAgIGNpdHksXG4gICAgICBsb2NhbF90aW1lLFxuICAgICAgY29uZGl0aW9uLFxuICAgICAgY29uZGl0aW9uX2ljb24sXG4gICAgICBodW1pZGl0eSxcbiAgICAgIHN1bnJpc2UsXG4gICAgICBzdW5zZXQsXG4gICAgICBjdXJyZW50Q2Vsc2l1c0RhdGEsXG4gICAgICBjdXJyZW50RmFocmVuaGVpdERhdGEsXG4gICAgICBob3VybHlGb3JlY2FzdERhdGFcbiAgICApO1xuICAgIGNvbnN0IGRhaWx5Rm9yZWNhc3RPYmplY3QgPSBuZXcgZGFpbHlGb3JlY2FzdChkYWlseUZvcmVjYXN0RGF0YSk7XG4gICAgY29uc3QgaG91cmx5Rm9yZWNhc3RPYmplY3QgPSBuZXcgaG91cmx5Rm9yZWNhc3QoaG91cmx5Rm9yZWNhc3REYXRhKTtcbiAgICBkYWlseUZvcmVjYXN0T2JqZWN0LmdlbmVyYXRlRGFpbHlEYXRhKCk7XG4gICAgZGFpbHlGb3JlY2FzdE9iamVjdC5nZW5lcmF0ZURhaWx5RGF0YUJ1dHRvbigpO1xuICAgIGhvdXJseUZvcmVjYXN0T2JqZWN0LmdlbmVyYXRlSG91cmx5RGF0YUJ1dHRvbigpO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIGN1cnJlbldlYXRoZXIuYmFzaWNEYXRhRE9NKCk7XG4gICAgY3VycmVuV2VhdGhlci5hZGRpdGlvbmFsRGF0YURPTSgpO1xuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJkYWlseSIsImRhdGUiLCJjb25kaXRpb25faWNvbiIsInRlbXAiLCJjb25kaXRpb25UZXh0IiwiZGFpbHlEYXRhQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRhaWx5RGF0ZUhvbGRlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZXN1bHQiLCJzcGxpdCIsInNsaWNlIiwiam9pbiIsInNwbGljZSIsImlubmVySFRNTCIsImRhaWx5Q29uZGl0aW9uSWNvbiIsInNldEF0dHJpYnV0ZSIsImRhaWx5Q29uZGl0aW9uVGV4dCIsImRhaWx5VGVtcGVyYXR1cmVIb2xkZXIiLCJDb250YWluZXIiLCJhcHBlbmRDaGlsZCIsImJ1dHRvbkNvbnRhaW5lciIsImRhaWx5QnV0dG9uIiwiaG91cmx5QnV0dG9uIiwiYXJyb3dDb250YWluZXIiLCJsZWZ0QXJyb3ciLCJyaWdodEFycm93IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsInJlcGxhY2VDaGlsZCIsImNoaWxkcmVuIiwiYnV0dG9ucyIsInNjcm9sbENvbnRhaW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic2Nyb2xsQnkiLCJsZWZ0IiwiZGVsdGFZIiwiZGF0YUJhclNjcm9sbCIsImJhc2ljRGF0YSIsImNpdHkiLCJjb3VudHJ5IiwidGltZSIsImNvbmRpdGlvbkljb24iLCJjb25kaXRpb24iLCJ0ZW1wZXJhdHVyZSIsImRhdGFIb2xkZXIiLCJjaXR5Q291bnRyeU5hbWUiLCJ0aW1lRGF0ZSIsImNvbmRpdGlvbkNvbnRhaW5lciIsImNvbmRpdGlvbkljb25Db250YWluZXIiLCJ3ZWF0aGVyQ29uZGl0aW9uIiwiY3VycmVudFRlbXBlcmF0dXJlIiwiYWRkaXRpb25hbERhdGEiLCJodW1pZGl0eSIsImZlZWxzbGlrZSIsIndpbmRzcGVlZCIsInN1bnJpc2UiLCJzdW5zZXQiLCJsb2NhbF90aW1lIiwiaG91cmx5Rm9yZWNhc3REYXRhIiwiYWRkaXRpb25hbERhdGFIb2xkZXIiLCJodW1pZGl0eURhdGEiLCJmZWVsc2xpa2VEYXRhIiwid2luZHNwZWVkRGF0YSIsImNoYW5jZVJhaW5EYXRhIiwic2hpZnQiLCJzdW5yaXNlRGF0YSIsInN1bnNldERhdGEiLCJLZXkiLCJjaGFuY2VPZlJhaW4iLCJjaGFuY2VPZlJhaW5jb3VudGVyIiwiY291bnRlciIsImNoYW5jZUFycmF5IiwiaSIsIk9iamVjdCIsImtleXMiLCJkYXkwIiwiaG91ciIsInRpbWVTbGljZXIiLCJEYXRlIiwiZ2V0VGltZSIsImNoYW5jZV9vZl9yYWluIiwiaW5pdGlhbENoYW5jZSIsImluY3JlYXNlIiwicHVzaCIsIk1hdGgiLCJyb3VuZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIldlYXRoZXIiLCJjb25zdHJ1Y3RvciIsImNlbHNpdXNEYXRhIiwiZmFocmVuaGVpdERhdGEiLCJ0aGlzIiwiYmFzaWNEYXRhRE9NIiwiYWRkaXRpb25hbERhdGFET00iLCJ3aW5kIiwiZGFpbHlGb3JlY2FzdCIsImdlbmVyYXRlRGFpbHlEYXRhIiwiZGF0YUNvbnRhaW5lclJlbW92ZXIiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkYXRlTm93IiwiY29uZGl0aW9uSWNvbk5vdyIsInRlbXBlcmF0dXJlTm93IiwiYXZnX3RlbXBDIiwiZ2VuZXJhdGVEYWlseURhdGFCdXR0b24iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaG91cmx5Rm9yZWNhc3QiLCJnZW5lcmF0ZUhvdXJseURhdGEiLCJrIiwidGVtcGVyYXR1cmVDIiwiZ2VuZXJhdGVIb3VybHlEYXRhQnV0dG9uIiwiYXN5bmMiLCJ3aGF0TG9jYXRpb24iLCJyZXF1ZXN0IiwiZmV0Y2giLCJtb2RlIiwicmVzcG9uc2UiLCJqc29uIiwiY29uc29sZSIsImxvZyIsIkRhdGFPYmplY3QiLCJiYXNpY19kYXRhIiwibG9jYXRpb24iLCJuYW1lIiwibG9jYWx0aW1lIiwiY3VycmVudCIsInRleHQiLCJpY29uIiwiZm9yZWNhc3QiLCJmb3JlY2FzdGRheSIsImFzdHJvIiwiY2Vsc2l1cyIsImZlZWxzbGlrZV9jIiwidGVtcF9jIiwid2luZF9rcGgiLCJmYWhyZW5oZWl0IiwiZmVlbHNsaWtlX2YiLCJ0ZW1wX2YiLCJ3aW5kX21waCIsImZvcmVjYXN0X3Blcl9kYXkiLCJmb3JlY2FzdF9wZXJfaG91ciIsImZvcmVjYXN0UGVyRGF5IiwiZGF5IiwiYXZndGVtcF9jIiwiYXZnX3RlbXBGIiwiYXZndGVtcF9mIiwiZm9yZWNhc3RQZXJIb3VyIiwidGVtcGVyYXR1cmVGIiwiY2hhbmNlX29mX3Nub3ciLCJlcnJvciIsImFwaVJlcXVlc3QiLCJ2YWx1ZSIsInRoZW4iLCJkYXRhIiwiY3VycmVudENlbHNpdXNEYXRhIiwiY3VycmVudEZhaHJlbmhlaXREYXRhIiwiZGFpbHlGb3JlY2FzdERhdGEiLCJjdXJyZW5XZWF0aGVyIiwiZGFpbHlGb3JlY2FzdE9iamVjdCIsImhvdXJseUZvcmVjYXN0T2JqZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==